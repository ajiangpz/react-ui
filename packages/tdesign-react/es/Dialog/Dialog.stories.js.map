{"version":3,"file":"Dialog.stories.js","sources":["../../../components/Dialog/Dialog.stories.tsx"],"sourcesContent":["import type { Meta, StoryObj } from \"@storybook/react\";\nimport {\n  Dialog, type DialogProps\n} from \"./index\";\n\nimport { DialogPlugin } from './plugin';\nimport { Button } from \"../button\";\nimport { useState } from \"react\";\nimport \"@/style\";\n\n\nconst meta = {\n  title: \"Components/Dialog\",\n  component: Dialog,\n  tags: [\"autodocs\"]\n} satisfies Meta<typeof Dialog>;\n\nexport default meta;\ntype Story = StoryObj<typeof Dialog>;\n\nconst Base = () => {\n  const [visible, setVisible] = useState(false);\n  const handleClick = () => {\n    setVisible(true);\n  };\n\n  const onConfirm: DialogProps['onConfirm'] = (context) => {\n    console.log('点击了确认按钮', context);\n    setVisible(false);\n  };\n\n  const onCancel: DialogProps['onCancel'] = (context) => {\n    console.log('点击了取消按钮', context);\n  };\n  const onClickCloseBtn: DialogProps['onCloseBtnClick'] = (context) => {\n    console.log('点击了关闭按钮', context);\n  };\n  const onKeydownEsc: DialogProps['onEscKeydown'] = (context) => {\n    console.log('按下了ESC', context);\n  };\n  const onClickOverlay: DialogProps['onOverlayClick'] = (context) => {\n    console.log('点击了蒙层', context);\n  };\n\n  const handleClose: DialogProps['onClose'] = (context) => {\n    console.log('关闭弹窗，点击关闭按钮、按下ESC、点击蒙层等触发', context);\n    setVisible(false);\n  };\n  return (\n    <>\n      <Button theme=\"primary\" onClick={handleClick}>\n        Open Modal\n      </Button>\n      <Dialog\n        header=\"Basic Modal\"\n        visible={visible}\n        confirmOnEnter\n        onClose={handleClose}\n        onConfirm={onConfirm}\n        onCancel={onCancel}\n        onEscKeydown={onKeydownEsc}\n        onCloseBtnClick={onClickCloseBtn}\n        onOverlayClick={onClickOverlay}\n      >\n        <p>This is a dialog</p>\n      </Dialog>\n    </>\n  );\n}\n\n\n\nexport const Default: Story = {\n  args: {},\n  render: () => <Base></Base>\n};\n\n\nconst Plugin = () => {\n  const buttonStyle = { marginRight: 16 };\n  const showDialog = () => {\n    const myDialog = DialogPlugin({\n      header: 'Dialog-Plugin',\n      body: 'Hi, darling! Do you want to be my lover?',\n      onConfirm: ({ e }) => {\n        console.log('confirm clicked', e);\n        myDialog.hide();\n      },\n      onClose: ({ e, trigger }) => {\n        console.log('e: ', e);\n        console.log('trigger: ', trigger);\n        myDialog.hide();\n      },\n      onCloseBtnClick: ({ e }) => {\n        console.log('close btn: ', e);\n      },\n    });\n  };\n  const handleDN = () => {\n    const dialogNode = DialogPlugin({\n      header: 'Dialog-Plugin',\n      body: 'Hi, darling! Do you want to be my lover?',\n    });\n    dialogNode.update({\n      header: 'Updated-Dialog-Plugin',\n      cancelBtn: null,\n      onConfirm: ({ e }) => {\n        console.log('confirm button has been clicked!');\n        console.log('e: ', e);\n        dialogNode.hide();\n        dialogNode.destroy();\n      },\n      onClose: ({ e, trigger }) => {\n        console.log('e: ', e);\n        console.log('trigger: ', trigger);\n        dialogNode.hide();\n      },\n    });\n  };\n  const onConfirm = () => {\n    const confirmDia = DialogPlugin.confirm({\n      header: 'Dialog-Confirm-Plugin',\n      body: 'Are you sure to delete it?',\n      confirmBtn: 'ok',\n      cancelBtn: 'cancel',\n      onConfirm: ({ e }) => {\n        console.log('confirm button has been clicked!');\n        console.log('e: ', e);\n        confirmDia.hide();\n      },\n      onClose: ({ e, trigger }) => {\n        console.log('e: ', e);\n        console.log('trigger: ', trigger);\n        confirmDia.hide();\n      },\n    });\n  };\n  const onAlert = () => {\n    const alertDia = DialogPlugin.alert({\n      header: 'Dialog-Alert-Plugin',\n      body: 'Notice: Your balance is going to be empty.',\n      confirmBtn: {\n        content: 'Got it!',\n        variant: 'base',\n        theme: 'danger',\n      },\n      onConfirm: ({ e }) => {\n        console.log('confirm e: ', e);\n        alertDia.hide();\n      },\n      onClose: ({ e, trigger }) => {\n        console.log('close e: ', e);\n        console.log('trigger: ', trigger);\n        alertDia.hide();\n      },\n    });\n  };\n  const onDialogPluginConfirm = () => {\n    const confirmDia = DialogPlugin.confirm({\n      header: 'Dialog-Confirm-Plugin',\n      body: 'Are you sure to delete it?',\n      confirmBtn: 'ok',\n      cancelBtn: 'cancel',\n      onConfirm: ({ e }) => {\n        console.log('confirm button has been clicked!');\n        console.log('e: ', e);\n        confirmDia.hide();\n      },\n      onClose: ({ e, trigger }) => {\n        console.log('e: ', e);\n        console.log('trigger: ', trigger);\n        confirmDia.hide();\n      },\n    });\n  };\n  return (\n    <div >\n      <p>函数调用方式一：DialogPlugin(options)</p>\n      <p>函数调用方式二：DialogPlugin.confirm(options)</p>\n      <p>函数调用方式三：DialogPlugin.alert(options)</p>\n      <div className=\"flex gap-2 mt-2\">\n        <Button theme=\"primary\" onClick={showDialog} style={buttonStyle}>\n          dialog\n        </Button>\n        <Button theme=\"primary\" onClick={handleDN} style={buttonStyle}>\n          handleDialogNode\n        </Button>\n        <Button theme=\"primary\" onClick={onConfirm} style={buttonStyle}>\n          confirm\n        </Button>\n        <Button theme=\"primary\" onClick={onAlert} style={buttonStyle}>\n          alert\n        </Button>\n        <Button theme=\"primary\" onClick={onDialogPluginConfirm} style={buttonStyle}>\n          DialogPlugin.confirm\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nexport const PluginExample: Story = {\n  args: {},\n  render: () => <Plugin></Plugin>\n}"],"names":["meta","title","component","Dialog","tags","Base","_useState","useState","_useState2","_slicedToArray","visible","setVisible","handleClick","onConfirm","context","console","log","onCancel","onClickCloseBtn","onKeydownEsc","onClickOverlay","handleClose","React","createElement","Fragment","Button","theme","onClick","header","confirmOnEnter","onClose","onEscKeydown","onCloseBtnClick","onOverlayClick","Default","args","render","Plugin","buttonStyle","marginRight","showDialog","myDialog","DialogPlugin","body","_ref","e","hide","_ref2","trigger","_ref3","handleDN","dialogNode","update","cancelBtn","_ref4","destroy","_ref5","confirmDia","confirm","confirmBtn","_ref6","_ref7","onAlert","alertDia","alert","content","variant","_ref8","_ref9","onDialogPluginConfirm","_ref0","_ref1","className","style","PluginExample"],"mappings":"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"}