{"version":3,"file":"Tag.js","sources":["../../../components/tag/defaultProps.ts","../../../components/tag/Tag.tsx"],"sourcesContent":["/**\n * 该文件为脚本自动生成文件，请勿随意修改。如需修改请联系 PMC\n * */\n\nimport { TdTagProps, TdCheckTagProps, TdCheckTagGroupProps } from './type';\n\nexport const tagDefaultProps: TdTagProps = {\n  closable: false,\n  disabled: false,\n  icon: undefined,\n  shape: 'square',\n  size: 'medium',\n  theme: 'default',\n  variant: 'dark',\n};\n\nexport const checkTagDefaultProps: TdCheckTagProps = { disabled: false, size: 'medium' };\n\nexport const checkTagGroupDefaultProps: TdCheckTagGroupProps = { multiple: false, defaultValue: [] };\n","import React, {\n  ForwardRefRenderFunction,\n  FocusEvent,\n  forwardRef,\n  useMemo,\n} from 'react';\nimport classNames from 'classnames';\nimport { X } from 'lucide-react';\nimport tinycolor from 'tinycolor2';\nimport noop from '../utils/noop';\nimport useConfig from '../hooks/useConfig';\nimport useGlobalIcon from '../hooks/useGlobalIcon';\nimport { StyledProps } from '../common';\nimport { TdTagProps } from './type';\nimport { tagDefaultProps } from './defaultProps';\nimport useDefaultProps from '../hooks/useDefaultProps';\n\nexport interface TagProps extends TdTagProps, StyledProps {\n  /**\n   * 标签内容\n   */\n  tabIndex?: number;\n  onFocus?: (e: FocusEvent<HTMLDivElement>) => void;\n  onBlur?: (e: FocusEvent<HTMLDivElement>) => void;\n}\n\nexport const TagFunction: ForwardRefRenderFunction<HTMLDivElement, TagProps> = (\n  originalProps,\n  ref,\n) => {\n  const props = useDefaultProps<TagProps>(originalProps, tagDefaultProps);\n  const {\n    theme,\n    size,\n    shape,\n    variant,\n    closable,\n    maxWidth,\n    icon,\n    content,\n    onClick = noop,\n    onClose = noop,\n    className,\n    style,\n    disabled,\n    children,\n    color,\n    title: titleAttr,\n    ...otherTagProps\n  } = props;\n\n  const { classPrefix } = useConfig();\n  const { CloseIcon } = useGlobalIcon({\n    CloseIcon: X,\n  });\n\n  const tagClassPrefix = `${classPrefix}-tag`;\n\n  const sizeMap = {\n    large: `${classPrefix}-size-l`,\n    small: `${classPrefix}-size-s`,\n  };\n\n  const tagClassNames = classNames(\n    tagClassPrefix,\n    `${tagClassPrefix}--${theme}`,\n    `${tagClassPrefix}--${variant}`,\n    {\n      [`${tagClassPrefix}--${shape}`]: shape !== 'square',\n      [`${tagClassPrefix}--ellipsis`]: !!maxWidth,\n      [`${tagClassPrefix}--disabled`]: disabled,\n    },\n    sizeMap[size],\n    className,\n  );\n\n  const deleteIcon = (\n    <CloseIcon\n      onClick={(e) => {\n        if (disabled) return;\n        onClose({ e });\n      }}\n      className={`${tagClassPrefix}__icon-close`}\n    />\n  );\n\n  const title = useMemo(() => {\n    if (Reflect.has(props, 'title')) return titleAttr;\n    if (children && typeof children === 'string') return children;\n    if (content && typeof content === 'string') return content;\n  }, [children, content, props, titleAttr]);\n\n  const titleAttribute = title ? { title } : undefined;\n\n  const getTagStyle = useMemo(() => {\n    if (!color) return style;\n    const luminance = tinycolor(color).getLuminance();\n\n    const calculatedStyle: React.CSSProperties = {};\n\n    calculatedStyle.color = luminance > 0.5 ? 'black' : 'white';\n    if (variant === 'outline' || variant === 'light-outline') {\n      calculatedStyle.borderColor = color;\n    }\n\n    if (variant !== 'outline') {\n      const getLightestShade = () => {\n        const { r, g, b } = tinycolor(color).toRgb();\n        // alpha 0.1  is designed by @wen1kang\n        return `rgba(${r}, ${g}, ${b}, 0.1)`;\n      };\n\n      calculatedStyle.backgroundColor =\n        variant === 'dark' ? color : getLightestShade();\n    }\n    if (variant !== 'dark') {\n      calculatedStyle.color = color;\n    }\n    return { ...calculatedStyle, ...style };\n  }, [color, variant, style]);\n\n  const getTextStyle = useMemo(() => {\n    if (!maxWidth) return {};\n\n    return {\n      maxWidth: isNaN(Number(maxWidth)) ? String(maxWidth) : `${maxWidth}px`,\n    };\n  }, [maxWidth]);\n\n  const tag = (\n    <div\n      ref={ref}\n      className={tagClassNames}\n      onClick={(e) => {\n        if (disabled) return;\n        onClick({ e });\n      }}\n      style={getTagStyle}\n      {...otherTagProps}\n    >\n      <>\n        {icon}\n        <span\n          className={maxWidth ? `${tagClassPrefix}--text` : undefined}\n          style={getTextStyle}\n          {...titleAttribute}\n        >\n          {children ?? content}\n        </span>\n        {closable && !disabled && deleteIcon}\n      </>\n    </div>\n  );\n\n  return tag;\n};\n\nexport const Tag = forwardRef(TagFunction);\n\nTag.displayName = 'Tag';\n\nexport default Tag;\n"],"names":["tagDefaultProps","closable","disabled","icon","shape","size","theme","variant","checkTagDefaultProps","checkTagGroupDefaultProps","multiple","defaultValue","TagFunction","originalProps","ref","props","useDefaultProps","maxWidth","content","_props$onClick","onClick","noop","_props$onClose","onClose","className","style","children","color","titleAttr","title","otherTagProps","_objectWithoutProperties","_excluded","_useConfig","useConfig","classPrefix","_useGlobalIcon","useGlobalIcon","CloseIcon","X","tagClassPrefix","concat","sizeMap","large","small","tagClassNames","classNames","_defineProperty","deleteIcon","React","createElement","e","useMemo","Reflect","has","titleAttribute","getTagStyle","luminance","tinycolor","getLuminance","calculatedStyle","borderColor","getLightestShade","_tinycolor$toRgb","toRgb","r","g","b","backgroundColor","_objectSpread","getTextStyle","isNaN","Number","String","tag","Tag","forwardRef","displayName"],"mappings":"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"}