{"version":3,"file":"dep-B6ztXA2I.js","sources":["../../../components/utils/react-render.ts"],"sourcesContent":["// Implementation reference from: https://github.com/react-component/util/blob/master/src/React/render.ts\n// @ts-ignore\nimport type * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport type { Root } from 'react-dom/client';\n\n// Let compiler not to search module usage\nconst fullClone = {\n  ...ReactDOM,\n} as typeof ReactDOM & {\n  __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED?: {\n    usingClientEntryPoint?: boolean;\n  };\n  createRoot?: CreateRoot;\n};\n\ntype CreateRoot = (container: ContainerType) => Root;\n\n// @ts-ignore\nconst { version, render: reactRender, unmountComponentAtNode } = fullClone;\n\nlet legacyCreateRoot: CreateRoot;\ntry {\n  const mainVersion = Number((version || '').split('.')[0]);\n  if (mainVersion >= 18 && mainVersion < 19) {\n    legacyCreateRoot = fullClone.createRoot;\n  }\n  if (process.env.NODE_ENV !== 'production' && mainVersion >= 19) {\n    console.warn(\n      'TDesign warning: Please import react-19-adapter in React 19, See link: https://github.com/Tencent/tdesign-react/blob/develop/packages/tdesign-react/site/docs/getting-started.md#如何在-react-19-中使用',\n    );\n  }\n} catch (e) {\n  // Do nothing;\n}\n\nfunction toggleWarning(skip: boolean) {\n  const { __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED } = fullClone;\n\n  if (\n    __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED &&\n    typeof __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED === 'object'\n  ) {\n    __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.usingClientEntryPoint =\n      skip;\n  }\n}\n\nconst MARK = '__td_react_root__';\n\n// ========================== Render ==========================\ntype ContainerType = (Element | DocumentFragment) & {\n  [MARK]?: Root;\n};\n\nfunction modernRender(node: React.ReactElement, container: ContainerType) {\n  toggleWarning(true);\n  const root = container[MARK] || legacyCreateRoot(container);\n  toggleWarning(false);\n\n  root.render(node);\n\n  // eslint-disable-next-line\n  container[MARK] = root;\n}\n\nfunction legacyRender(node: React.ReactElement, container: ContainerType) {\n  reactRender(node, container);\n}\n\nexport function render(node: React.ReactElement, container: ContainerType) {\n  if (legacyCreateRoot) {\n    modernRender(node, container);\n    return;\n  }\n\n  legacyRender?.(node, container);\n}\n\n// ========================= Unmount ==========================\nasync function modernUnmount(container: ContainerType) {\n  // Delay to unmount to avoid React 18 sync warning\n  return Promise.resolve().then(() => {\n    container[MARK]?.unmount();\n\n    // eslint-disable-next-line\n    delete container[MARK];\n  });\n}\n\nfunction legacyUnmount(container: ContainerType) {\n  unmountComponentAtNode(container);\n}\n\nexport async function unmount(container: ContainerType) {\n  if (legacyCreateRoot !== undefined) {\n    // Delay to unmount to avoid React 18 sync warning\n    return modernUnmount(container);\n  }\n\n  legacyUnmount(container);\n}\n\n/**\n * @deprecated Set React render function for compatible usage.\n * This is internal usage only compatible with React 19.\n * And will be removed in next major version.\n */\nexport function renderAdapter(render?: CreateRoot) {\n  if (render) {\n    legacyCreateRoot = render;\n  }\n}\n"],"names":["fullClone","_objectSpread","ReactDOM","version","reactRender","render","unmountComponentAtNode","legacyCreateRoot","mainVersion","Number","split","createRoot","process","env","NODE_ENV","console","warn","e","toggleWarning","skip","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","_typeof","usingClientEntryPoint","MARK","modernRender","node","container","root","legacyRender","modernUnmount","_callee","_regeneratorRuntime","wrap","_context","prev","next","abrupt","Promise","resolve","then","_container$MARK","unmount","stop","_modernUnmount","apply","arguments","legacyUnmount","_unmount","_asyncToGenerator","mark","_callee2","_context2","renderAdapter"],"mappings":"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"}