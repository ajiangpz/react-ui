{"version":3,"file":"dep-Dqh5DYAh.js","sources":["../../../components/hooks/useControlled.ts"],"sourcesContent":["import { upperFirst } from 'lodash-es';\nimport React from 'react';\ntype DefaultOptions<T extends string> = `default${Capitalize<T>}`;\nexport interface ChangeHander<T, P extends any[]> {\n  (value: T, ...args: P): void;\n}\ntype ToString<T extends string | number | symbol> = T extends string\n  ? T\n  : `${Extract<T, number>}`;\nconst useControlled: <P extends any[], R extends object, K extends keyof R>(\n  props: R,\n  valueKey: K,\n  onChange: ChangeHander<R[K], P>,\n  defaultOptions?: { [key in DefaultOptions<ToString<K>>]: R[K] },\n) => [R[K], ChangeHander<R[K], P>] = (\n  props = {} as any,\n  valueKey, // 默认受控属性为 value\n  onChange,\n  defaultOptions = {} as any,\n) => {\n  const isControlled = Reflect.has(props, valueKey);\n  // 受控属性\n  const value = props[valueKey];\n\n  // 默认值\n  const defaultKey = `default${upperFirst(valueKey as string)}`;\n  const defaultValue =\n    defaultOptions[defaultKey as keyof typeof defaultOptions] ||\n    (props as Record<string, any>)[defaultKey];\n\n  const [internalValue, setInternalValue] = React.useState(defaultValue);\n\n  if (isControlled) return [value, onChange || (() => {})];\n  return [\n    internalValue,\n    (newValue, ...args) => {\n      setInternalValue(newValue);\n      onChange?.(newValue, ...args);\n    },\n  ];\n};\n\nexport default useControlled;\n"],"names":["useControlled","props","arguments","length","undefined","valueKey","onChange","defaultOptions","isControlled","Reflect","has","value","defaultKey","concat","upperFirst","defaultValue","_React$useState","React","useState","_React$useState2","_slicedToArray","internalValue","setInternalValue","newValue","_len","args","Array","_key","apply"],"mappings":";;;;AASA,IAAMA,aAAA,GAK+B,SAL/BA,aAAAA,GAUD;AAAA,EAAA,IAJHC,KAAA,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAQ;MACRG,QAAA,GAAAH,SAAA,CAAAC,MAAA,GAAA,CAAA,GAAAD,SAAA,MAAAE,SAAA;EAAA,IACAE,QAAA,GAAAJ,SAAA,CAAAC,MAAA,GAAA,CAAA,GAAAD,SAAA,MAAAE,SAAA;AAAA,EAAA,IACAG,cAAA,GAAAL,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAiB,EAAC;EAElB,IAAMM,YAAA,GAAeC,OAAA,CAAQC,GAAA,CAAIT,KAAA,EAAOI,QAAQ,CAAA;AAEhD,EAAA,IAAMM,KAAA,GAAQV,MAAMI,QAAQ,CAAA;EAG5B,IAAMO,UAAA,aAAAC,MAAA,CAAuBC,UAAA,CAAWT,QAAkB,CAAC,CAAA;EAC3D,IAAMU,YAAA,GACJR,cAAA,CAAeK,UAAyC,CAAA,IACvDX,MAA8BW,UAAU,CAAA;AAE3C,EAAA,IAAAI,eAAA,GAA0CC,KAAA,CAAMC,SAASH,YAAY,CAAA;IAAAI,gBAAA,GAAAC,cAAA,CAAAJ,eAAA,EAAA,CAAA,CAAA;AAA9DK,IAAAA,aAAA,GAAAF,gBAAA,CAAA,CAAA,CAAA;AAAeG,IAAAA,gBAAgB,GAAAH,gBAAA,CAAA,CAAA,CAAA;EAEtC,IAAIX,YAAA,EAAc,OAAO,CAACG,KAAA,EAAOL,YAAa,YAAM,CAAC,CAAE,CAAA;AACvD,EAAA,OAAO,CACLe,aAAA,EACA,UAACE,UAAsB;IACrBD,gBAAA,CAAiBC,QAAQ,CAAA;IAAA,KAAA,IAAAC,IAAA,GAAAtB,SAAA,CAAAC,MAAA,EADbsB,IAAA,OAAAC,KAAA,CAAAF,IAAA,GAAA,CAAA,GAAAA,IAAA,WAAAG,IAAA,GAAA,CAAA,EAAAA,IAAA,GAAAH,IAAA,EAAAG,IAAA,EAAA,EAAA;AAAAF,MAAAA,IAAA,CAAAE,IAAA,GAAA,CAAA,CAAA,GAAAzB,SAAA,CAAAyB,IAAA,CAAA;AAAA,IAAA;AAEZrB,IAAAA,QAAA,KAAA,IAAA,IAAAA,QAAA,KAAA,KAAA,CAAA,IAAAA,QAAA,CAAAsB,KAAA,CAAA,KAAA,CAAA,EAAA,CAAWL,QAAA,CAAA,CAAAV,MAAA,CAAaY,IAAI,CAAA,CAAA;AAC9B,EAAA,CAAA,CACF;AACF;;;;"}