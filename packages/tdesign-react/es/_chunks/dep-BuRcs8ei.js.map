{"version":3,"file":"dep-BuRcs8ei.js","sources":["../../../components/utils/ref.ts","../../../components/hooks/useLastest.ts","../../../components/hooks/useMutationObserver.ts","../../../components/hooks/useWindowSize.ts","../../../components/utils/isFragment.ts","../../../components/utils/refs.ts","../../../components/utils/listener.ts","../../../components/hooks/usePopper.ts"],"sourcesContent":["export function getRefDom(domRef: React.RefObject<any>) {\n  if (\n    domRef.current &&\n    typeof domRef.current === 'object' &&\n    'currentElement' in domRef.current\n  ) {\n    return domRef.current.currentElement;\n  }\n  return domRef.current;\n}\n","import { useRef } from 'react';\n\nconst useLatest = <T>(value: T) => {\n  const ref = useRef(value);\n  ref.current = value;\n  return ref;\n};\n\nexport default useLatest;\n","import { useRef, useEffect } from 'react';\nimport { debounce, isEqual } from 'lodash-es';\nimport useLatest from './useLastest';\n\nconst DEFAULT_OPTIONS = {\n  debounceTime: 0,\n  config: {\n    attributes: true,\n    childList: true,\n    characterData: true,\n    subtree: true,\n  } as MutationObserverInit,\n};\n\ntype Options = typeof DEFAULT_OPTIONS;\n\nexport default function useMutationObservable(\n  targetEl: HTMLElement | null,\n  cb: MutationCallback,\n  options = DEFAULT_OPTIONS,\n) {\n  const optionsRef = useRef<Options>(null);\n  const signalRef = useRef(0);\n  const callbackRef = useLatest(cb);\n\n  if (!isEqual(options, optionsRef.current)) {\n    signalRef.current += 1;\n  }\n\n  optionsRef.current = options;\n\n  useEffect(() => {\n    if (!targetEl || !targetEl?.nodeType) return;\n    let observer: MutationObserver | null = null;\n    try {\n      if (optionsRef.current !== null) {\n        const { debounceTime, config } = optionsRef.current;\n        const mutationCallback: MutationCallback = (...args) => {\n          callbackRef.current(...args);\n        };\n        observer = new MutationObserver(\n          debounceTime > 0\n            ? debounce(mutationCallback, debounceTime)\n            : mutationCallback,\n        );\n        observer.observe(targetEl, config);\n      }\n    } catch (e) {\n      console.error(e);\n    }\n\n    return () => {\n      if (observer) {\n        observer.disconnect();\n        observer = null;\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [targetEl, signalRef.current]);\n}\n","import { useEffect, useState } from 'react';\nimport { debounce } from 'lodash-es';\nimport { getWindowSize } from '../utils/dom';\n\nexport interface WindowSize {\n  width: number;\n  height: number;\n}\n\nfunction useWindowSize(): WindowSize {\n  const [size, setSize] = useState(getWindowSize);\n\n  useEffect(() => {\n    function handleResize() {\n      setSize(getWindowSize());\n    }\n\n    const debounceResize = debounce(handleResize, 400);\n\n    window.addEventListener('resize', debounceResize);\n\n    return () => {\n      window.removeEventListener('resize', debounceResize);\n      debounceResize.cancel();\n    };\n  }, []);\n\n  return size;\n}\n\nexport default useWindowSize;\n","// Source from:\n// https://github.com/react-component/util/blob/master/src/React/isFragment.ts\n\nconst REACT_ELEMENT_TYPE_18 = Symbol.for('react.element');\nconst REACT_ELEMENT_TYPE_19 = Symbol.for('react.transitional.element');\nconst REACT_FRAGMENT_TYPE = Symbol.for('react.fragment');\n\n/**\n * Compatible with React 18 or 19 to check if node is a Fragment.\n */\nexport default function isFragment(object: any) {\n  return (\n    // Base object type\n    object &&\n    typeof object === 'object' &&\n    // React Element type\n    (object.$$typeof === REACT_ELEMENT_TYPE_18 ||\n      object.$$typeof === REACT_ELEMENT_TYPE_19) &&\n    // React Fragment type\n    object.type === REACT_FRAGMENT_TYPE\n  );\n}\n","// Source from:\n// https://github.com/react-component/util/blob/master/src/ref.ts\n\nimport { isValidElement } from 'react';\nimport { ForwardRef, isMemo } from 'react-is';\nimport isFragment from './isFragment';\n\n// 判断是否支持 ref 透传\nexport const supportRef = (nodeOrComponent: any): boolean => {\n  if (!nodeOrComponent) {\n    return false;\n  }\n\n  // React 19 no need `forwardRef` anymore. So just pass if is a React element.\n  // eslint-disable-next-line no-prototype-builtins\n  if (\n    isReactElement(nodeOrComponent) &&\n    (nodeOrComponent as any).props.propertyIsEnumerable('ref')\n  ) {\n    return true;\n  }\n\n  const type = isMemo(nodeOrComponent)\n    ? nodeOrComponent.type.type\n    : nodeOrComponent.type;\n\n  // Function component node\n  if (\n    typeof type === 'function' &&\n    !type.prototype?.render &&\n    type.$$typeof !== ForwardRef\n  ) {\n    return false;\n  }\n\n  // Class component\n  if (\n    typeof nodeOrComponent === 'function' &&\n    !nodeOrComponent.prototype?.render &&\n    nodeOrComponent.$$typeof !== ForwardRef\n  ) {\n    return false;\n  }\n  return true;\n};\n\n// 获取 ref 中的 dom 元素\nexport function getRefDom(domRef: React.RefObject<any>) {\n  if (\n    domRef.current &&\n    typeof domRef.current === 'object' &&\n    'currentElement' in domRef.current\n  ) {\n    return domRef.current.currentElement;\n  }\n  return domRef.current;\n}\n\ninterface RefAttributes<T> extends React.Attributes {\n  ref: React.Ref<T>;\n}\n\nfunction isReactElement(node: React.ReactNode) {\n  return isValidElement(node) && !isFragment(node);\n}\n\nexport const supportNodeRef = <T = any>(\n  node: React.ReactNode,\n): node is React.ReactElement & RefAttributes<T> =>\n  isReactElement(node) && supportRef(node);\n\n/**\n * In React 19. `ref` is not a property from node.\n * But a property from `props.ref`.\n * To check if `props.ref` exist or fallback to `ref`.\n */\nexport const getNodeRef: <T = any>(\n  node: React.ReactNode,\n) => React.Ref<T> | null = (node) => {\n  if (node && isReactElement(node)) {\n    const ele = node as any;\n\n    // Source from:\n    // https://github.com/mui/material-ui/blob/master/packages/mui-utils/src/getReactNodeRef/getReactNodeRef.ts\n    // eslint-disable-next-line no-prototype-builtins\n    return ele.props.propertyIsEnumerable('ref') ? ele.props.ref : ele.ref;\n  }\n  return null;\n};\n","import { canUseDocument } from './dom';\n\nexport const on = ((): any => {\n  if (canUseDocument && document.addEventListener) {\n    return (\n      element: Node,\n      event: string,\n      handler: EventListenerOrEventListenerObject,\n    ): any => {\n      if (element && event && handler) {\n        element.addEventListener(event, handler, false);\n      }\n    };\n  }\n  return (\n    element: Node,\n    event: string,\n    handler: EventListenerOrEventListenerObject,\n  ): any => {\n    if (element && event && handler) {\n      (element as any).attachEvent(`on${event}`, handler);\n    }\n  };\n})();\n\nexport const off = ((): any => {\n  if (canUseDocument && document.removeEventListener) {\n    return (\n      element: Node,\n      event: string,\n      handler: EventListenerOrEventListenerObject,\n    ): any => {\n      if (element && event) {\n        element.removeEventListener(event, handler, false);\n      }\n    };\n  }\n  return (\n    element: Node,\n    event: string,\n    handler: EventListenerOrEventListenerObject,\n  ): any => {\n    if (element && event) {\n      (element as any).detachEvent(`on${event}`, handler);\n    }\n  };\n})();\n","// https://github.com/floating-ui/react-popper/blob/master/src/usePopper.js\n// React popper was archived by the owner on Dec 6, 2024.\n// to maintain this hook in the repo since upgrading to support React 19.0\nimport { useMemo, useRef, useState } from 'react';\nimport { flushSync } from 'react-dom';\nimport {\n  createPopper as defaultCreatePopper,\n  type Options as PopperOptions,\n  type VirtualElement,\n  type State as PopperState,\n  type Instance as PopperInstance,\n} from '@popperjs/core';\n\nimport isEqual from 'react-fast-compare';\nimport useIsomorphicLayoutEffect from './useLayoutEffect';\nimport type { Styles } from '@/common';\n\ntype Options = Partial<\n  PopperOptions & {\n    createPopper: typeof defaultCreatePopper;\n  }\n>;\n\ntype Attributes = {\n  [key: string]: { [key: string]: string };\n};\n\ntype State = {\n  styles: Record<string, Styles>;\n  attributes: Attributes;\n};\n\nimport type { ModifierPhases } from '@popperjs/core';\n\ninterface Modifier {\n  name: string;\n  enabled?: boolean;\n  phase?: ModifierPhases;\n  fn?: (data: { state: PopperState }) => void;\n  requires?: string[];\n}\n\nconst EMPTY_MODIFIERS: Modifier[] = [];\n\ntype UsePopperResult = {\n  state?: PopperState;\n  styles: Styles;\n  attributes: Attributes;\n  update: PopperInstance['update'] | null;\n  forceUpdate: PopperInstance['forceUpdate'] | null;\n};\n\nconst fromEntries = (entries: Array<[string, any]>): { [key: string]: any } =>\n  entries.reduce(\n    (acc, [key, value]) => {\n      acc[key] = value;\n      return acc;\n    },\n    {} as { [key: string]: any },\n  );\n\nconst usePopper = (\n  referenceElement?: Element | VirtualElement,\n  popperElement?: HTMLElement,\n  options: Options = {},\n): UsePopperResult => {\n  const prevOptions = useRef<PopperOptions>(null);\n\n  const optionsWithDefaults = {\n    onFirstUpdate: options.onFirstUpdate,\n    placement: options.placement || 'bottom',\n    strategy: options.strategy || 'absolute',\n    modifiers: options.modifiers || EMPTY_MODIFIERS,\n  };\n\n  const [state, setState] = useState<State>({\n    styles: {\n      popper: {\n        position: optionsWithDefaults.strategy,\n        left: '0',\n        top: '0',\n      },\n      arrow: {\n        position: 'absolute',\n      },\n    },\n    attributes: {},\n  });\n\n  const updateStateModifier = useMemo(\n    () => ({\n      name: 'updateState',\n      enabled: true,\n      phase: 'write' as ModifierPhases,\n      fn: ({ state }: { state: PopperState }) => {\n        const elements = Object.keys(state.elements);\n\n        flushSync(() => {\n          setState({\n            styles: fromEntries(\n              elements.map((element) => [element, state.styles[element] || {}]),\n            ),\n            attributes: fromEntries(\n              elements.map((element) => [element, state.attributes[element]]),\n            ),\n          });\n        });\n      },\n      requires: ['computeStyles'],\n    }),\n    [],\n  );\n\n  const popperOptions = useMemo(() => {\n    const newOptions = {\n      onFirstUpdate: optionsWithDefaults.onFirstUpdate,\n      placement: optionsWithDefaults.placement,\n      strategy: optionsWithDefaults.strategy,\n      modifiers: [\n        ...optionsWithDefaults.modifiers,\n        updateStateModifier,\n        {\n          name: 'applyStyles',\n          enabled: false,\n          phase: 'write' as ModifierPhases,\n        },\n      ],\n    };\n\n    if (isEqual(prevOptions.current, newOptions)) {\n      return prevOptions.current || newOptions;\n    }\n    prevOptions.current = newOptions;\n    return newOptions;\n  }, [\n    optionsWithDefaults.onFirstUpdate,\n    optionsWithDefaults.placement,\n    optionsWithDefaults.strategy,\n    optionsWithDefaults.modifiers,\n    updateStateModifier,\n  ]);\n\n  const popperInstanceRef = useRef<PopperInstance | null>(null);\n\n  useIsomorphicLayoutEffect(() => {\n    if (popperInstanceRef.current) {\n      popperInstanceRef.current.setOptions(popperOptions);\n    }\n  }, [popperOptions]);\n\n  useIsomorphicLayoutEffect(() => {\n    if (referenceElement == null || popperElement == null) {\n      return;\n    }\n\n    const createPopper = options.createPopper || defaultCreatePopper;\n    const popperInstance = createPopper(\n      referenceElement,\n      popperElement,\n      popperOptions,\n    );\n\n    popperInstanceRef.current = popperInstance;\n\n    return () => {\n      popperInstance.destroy();\n      popperInstanceRef.current = null;\n    };\n  }, [referenceElement, popperElement, options.createPopper]);\n\n  return {\n    state: popperInstanceRef.current\n      ? popperInstanceRef.current.state\n      : undefined,\n    styles: state.styles,\n    attributes: state.attributes,\n    update: popperInstanceRef.current ? popperInstanceRef.current.update : null,\n    forceUpdate: popperInstanceRef.current\n      ? popperInstanceRef.current.forceUpdate\n      : null,\n  };\n};\n\nexport default usePopper;\n"],"names":["getRefDom","domRef","current","_typeof","currentElement","useLatest","value","ref","useRef","DEFAULT_OPTIONS","debounceTime","config","attributes","childList","characterData","subtree","useMutationObservable","targetEl","cb","options","arguments","length","undefined","optionsRef","signalRef","callbackRef","isEqual","useEffect","nodeType","observer","_optionsRef$current","mutationCallback","apply","MutationObserver","debounce","observe","e","console","error","disconnect","useWindowSize","_useState","useState","getWindowSize","_useState2","_slicedToArray","size","setSize","handleResize","debounceResize","window","addEventListener","removeEventListener","cancel","REACT_ELEMENT_TYPE_18","Symbol","REACT_ELEMENT_TYPE_19","REACT_FRAGMENT_TYPE","isFragment","object","$$typeof","type","supportRef","nodeOrComponent","_type$prototype","_nodeOrComponent$prot","isReactElement","props","propertyIsEnumerable","isMemo","prototype","render","ForwardRef","node","isValidElement","supportNodeRef","getNodeRef","ele","on","canUseDocument","document","element","event","handler","attachEvent","concat","off","detachEvent","EMPTY_MODIFIERS","fromEntries","entries","reduce","acc","_ref","_ref2","key","usePopper","referenceElement","popperElement","prevOptions","optionsWithDefaults","onFirstUpdate","placement","strategy","modifiers","styles","popper","position","left","top","arrow","state","setState","updateStateModifier","useMemo","name","enabled","phase","fn","_ref3","elements","Object","keys","flushSync","map","requires","popperOptions","newOptions","_toConsumableArray","popperInstanceRef","useIsomorphicLayoutEffect","setOptions","createPopper","defaultCreatePopper","popperInstance","destroy","update","forceUpdate"],"mappings":"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"}