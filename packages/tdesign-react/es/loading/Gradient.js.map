{"version":3,"file":"Gradient.js","sources":["../../../components/loading/utils/setStyle.ts","../../../components/loading/circleAdapter.ts","../../../components/loading/Gradient.tsx"],"sourcesContent":["\n/**\n * 用于为节点增加styles\n * @param el HTMLElement\n * @param style Styles\n */\nfunction setStyle(el: HTMLElement, styles): void {\n  const keys = Object.keys(styles);\n  keys.forEach((key) => {\n    // @ts-ignore\n    // eslint-disable-next-line no-param-reassign\n    el.style[key] = styles[key];\n  });\n\n}\n\nexport default setStyle;","import setStyle from './utils/setStyle';\nimport { getIEVersion } from '../utils/helper';\n\nexport default function circleAdapter(circleElem: HTMLElement) {\n  let basicStyle = {};\n\n  if (!circleElem || typeof window === 'undefined') {\n    return;\n  }\n\n  const { color, fontSize } = window?.getComputedStyle?.(circleElem);\n\n  // to fix the browser compat of foreignObject in Safari,\n  // https://bugs.webkit.org/show_bug.cgi?id=23113\n  const ua = window?.navigator?.userAgent;\n  const isSafari = /Safari/.test(ua) && !/Chrome/.test(ua);\n  // 判断是否为 iOS 下的微信和企业微信\n  const isIosWechat =\n    /(?=.*iPhone)[?=.*MicroMessenger]/.test(ua) && !/Chrome/.test(ua);\n  // 判断是否为 iPadOS 下的微信和企业微信\n  const isIpadWechat =\n    /(?=.*iPad)[?=.*MicroMessenger]/.test(ua) && !/Chrome/.test(ua);\n\n  // 注意：chrome上调试mobile/ipad端时，loading出现异常，属于正常现象，不需要修改。\n  if (isSafari || isIosWechat || isIpadWechat) {\n    basicStyle = {\n      transformOrigin: '0px 0px',\n      transform: `scale(${parseInt(fontSize, 10) / 12})`,\n    };\n  }\n  // 添加：判断是否为IE浏览器\n  if (color && getIEVersion() > 11) {\n    const matched = color.match(/[\\d.]+/g);\n    const endColor = matched\n      ? `rgba(${matched[0]}, ${matched[1]}, ${matched[2]}, 0)`\n      : '';\n    setStyle(circleElem, {\n      ...basicStyle,\n      background: `conic-gradient(from 90deg at 50% 50%,${endColor} 0deg, ${color} 360deg)`,\n    });\n  } else {\n    setStyle(circleElem, {\n      ...basicStyle,\n      background: '',\n    });\n  }\n}\n","import { useEffect, FC } from 'react';\nimport classnames from 'classnames';\nimport circleAdapter from './circleAdapter';\nimport useDomRefCallback from '../hooks/useDomRefCallback';\nimport useConfig from '../hooks/useConfig';\n\n/**\n * Loading组件 渐变部分实现\n */\nconst GradientLoading: FC = () => {\n  const { classPrefix } = useConfig();\n  const [conicRef, setConicRef] = useDomRefCallback();\n  const gradientClass = `${classPrefix}-loading__gradient`;\n\n  useEffect(() => {\n    const el = conicRef;\n    circleAdapter(el);\n  }, [conicRef]);\n\n  return (\n    <svg\n      className={classnames(gradientClass, `${classPrefix}-icon-loading`)}\n      viewBox=\"0 0 12 12\"\n      version=\"1.1\"\n      width=\"1em\"\n      height=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <foreignObject x=\"0\" y=\"0\" width=\"12\" height=\"12\">\n        <div className={`${gradientClass}-conic`} ref={setConicRef} />\n      </foreignObject>\n    </svg>\n  );\n};\n\nexport default GradientLoading;\n"],"names":["setStyle","el","styles","keys","Object","forEach","key","style","circleAdapter","circleElem","_window","_window$getComputedSt2","_window2","basicStyle","window","_window$getComputedSt","getComputedStyle","call","color","fontSize","ua","navigator","userAgent","isSafari","test","isIosWechat","isIpadWechat","transformOrigin","transform","parseInt","getIEVersion","matched","match","endColor","concat","_objectSpread","background","GradientLoading","_useConfig","useConfig","classPrefix","_useDomRefCallback","useDomRefCallback","_useDomRefCallback2","_slicedToArray","conicRef","setConicRef","gradientClass","useEffect","React","createElement","className","classnames","viewBox","version","width","height","xmlns","x","y","ref"],"mappings":"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"}