@use "../../_vars.scss" as *;
// ç»„ä»¶å…è®¸å•ä¸ªç»„ä»¶æ‰“åŒ…ï¼Œå› æ­¤é»˜è®¤å¼•å…¥å…¬å…±åŸºç¡€æ ·å¼

@use '../../_vars.scss' as *;

@use './_vars.scss' as *;

@use './_animate.scss' as *;

@use './_mixins.scss' as *;

@use '../../mixins/_reset.scss' as *;

@use '../../mixins/_scrollbar.scss' as *;

// <name> æ›¿æ¢ä¸ºç»„ä»¶å
.#{$prefix}-dialog {
  @include reset;

  width: $dialog-width;
  background-color: $dialog-bg-color;
  position: relative;
  border: $dialog-border;
  border-radius: $border-radius-large;

  // icon theme
  .t-icon.#{$prefix}-is-info {
    color: $dialog-info-icon-color;
  }

  .t-icon.#{$prefix}-is-success {
    color: $dialog-success-icon-color;
  }

  .t-icon.#{$prefix}-is-warning {
    color: $dialog-warning-icon-color;
  }

  .t-icon.#{$prefix}-is-error {
    color: $dialog-error-icon-color;
  }

  &--lock {
    overflow: hidden;
  }

  &__header {
    color: $dialog-header-text-color;
    font: $dialog-header-font;
    font-weight: $dialog-header-weight;
    display: flex;
    align-items: center;
    word-break: break-word;
    gap: $dialog-header-content-margin-right;
    box-sizing: border-box;

    .#{$prefix}-dialog__header-content {
      display: flex;
      align-items: flex-start;
      width: 100%;
    }

    .t-icon:not(.t-icon-close) {
      font-size: $dialog-icon-size;
      display: inline-flex;
      align-items: center;
      margin-right: $dialog-header-icon-margin-right;
      flex-shrink: 0;
    }
  }

  &__header--fullscreen {
    background-color: $dialog-header-bg-color-fullscreen;
    min-height: $dialog-header-height-fullscreen;
    justify-content: flex-end;
    display: flex;
    align-items: center;
    flex-direction: row;
    padding: $dialog-header-padding-fullscreen;

    .#{$prefix}-dialog__header-content {
      box-sizing: border-box;
      display: flex;
      justify-content: center;
      align-items: center;
    }
  }

  &__body {
    @include scrollbar();

    color: $dialog-body-text-color;
    font: $dialog-body-text-font;
    overflow: auto;
    padding: $dialog-body-padding;
    word-break: break-word;

    &__icon,
    &--icon {
      padding: $dialog-body-icon-padding;
    }
  }

  &__body--fullscreen {
    @include scrollbar();

    box-sizing: border-box;
    padding: $dialog-body-padding-fullscreen;
    height: calc(
      100% - $dialog-header-height-fullscreen - $dialog-footer-height-fullscreen
    );
    overflow: auto;
  }

  &__body--fullscreen--without-footer {
    box-sizing: border-box;
    padding: $dialog-body-padding-fullscreen;
    height: calc(100% - $dialog-header-height-fullscreen);
    overflow: auto;
  }

  &__footer {
    width: 100%;
    text-align: right;
    padding: $dialog-footer-padding;
    .#{$prefix}-button + .#{$prefix}-button {
      margin-left: $dialog-footer-button-margin-left;
    }
  }

  &__footer--fullscreen {
    min-height: $dialog-footer-height-fullscreen;
    padding: $dialog-footer-padding-fullscreen;
    box-sizing: border-box;
  }

  &--default {
    padding: $dialog-default-spacer;
  }

  &__close {
    font-size: $dialog-close-icon-size;
    color: $dialog-close-color;
    display: flex;
    width: $dialog-close-icon-size;
    height: $dialog-close-icon-size;
    align-items: center;
    border-radius: $border-radius-default;
    transition: all $anim-duration-base linear;
    padding: $dialog-closebtn-padding;

    &:hover {
      cursor: pointer;
      background: $dialog-close-icon-hover;
    }

    &:active {
      background: $dialog-close-icon-active;
    }
  }

  &__close--fullscreen {
    display: flex;
    background: transparent;

    &:hover {
      cursor: pointer;
      background: $dialog-close-icon-fullscreen-hover;
    }

    &:active {
      background: $dialog-close-icon-fullscreen-active;
    }
  }

  &.#{$prefix}-dialog--draggable {
    &:hover {
      cursor: move;
    }
    .#{$prefix}-dialog__header,
    .#{$prefix}-dialog__body,
    .#{$prefix}-dialog__footer {
      &:hover {
        cursor: auto;
      }
    }
  }

  &__fullscreen {
    width: 100%;
    border-radius: 0;
  }
}

// t-dialog ç»„ä»¶æœ¬èº«
.#{$prefix}-dialog__ctx {
  // dialogå†…å®¹æº¢å‡ºéœ€è¦è€ƒè™‘æ»šåŠ¨
  pointer-events: auto;
  outline: none;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;

  // modeless ç‚¹å‡»ç©¿é€?å³å¯ä»¥æ“ä½œèƒŒæ™¯åçš„å…ƒç´?
  &.#{$prefix}-dialog__ctx--modeless {
    pointer-events: none;
  }

  &.#{$prefix}-dialog__ctx--fixed {
    position: fixed;
    z-index: $z-index-dialog;
  }

  &.#{$prefix}-dialog__ctx--absolute {
    position: absolute;
    // ç”¨äºæŒ‚è½½å…ƒç´  ä¿®æ”¹å®šä½æ–¹å¼
    .#{$prefix}-dialog__mask {
      position: absolute;
    }
    .#{$prefix}-dialog__wrap {
      position: absolute;
    }
  }

  &.#{$prefix}-is-visible {
    visibility: visible;
  }

  &.#{$prefix}-is-hidden {
    visibility: hidden;
  }

  &.#{$prefix}-is-display {
    display: block;
  }

  &.#{$prefix}-not-display {
    display: none;
  }
  // é®ç½©å±?
  .#{$prefix}-dialog__mask {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
    background: $dialog-mask-bg-color;
    pointer-events: auto;
  }
  // wrap æ»šåŠ¨çš„æ˜¾ç¤ºå±‚ å›ºå®šä¸ºé¡µé¢çª—å£å¤§å°?
  .#{$prefix}-dialog__wrap {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
    overflow: auto;
    @include scrollbar(8px, 2px);
  }
  // å®šä½å±?ç”¨äºå®ç°å±…ä¸­ æˆ–è€…è·ç¦»é¡¶éƒ?å®šä½
  .#{$prefix}-dialog__position {
    // å› ä¸ºå†…å®¹ä¼šè¶…å‡?ä½¿ç”¨flexå¸ƒå±€
    display: flex;
    justify-content: center;
    min-height: 100%;
    width: 100%;
    // é€šè¿‡ä¿®æ”¹positionä¸ºabsoluteè¿›è¡Œæ‹–æ‹½å®šä½
    position: relative;
    // è®¾ç½®æœ€å°è·ç¦»é¡¶éƒ¨åº•éƒ¨è·ç¦?
    padding: 48px 0;
    box-sizing: border-box;
    // å±…ä¸­å’Œè·é¡¶éƒ¨å¸ƒå±€
    &.#{$prefix}-dialog--top {
      align-items: flex-start;
      // è¿™é‡Œtop apiå®ç° æ›´æ”¹padding å› ä¸ºå­å…ƒç´ æ‹–æ‹½å®šä½?å¦‚æœä½¿ç”¨å­å…ƒç´ margin æ‹–æ‹½æ—¶éœ€è¦è®¡ç®—margin æ¯”è¾ƒéº»çƒ¦
      padding-top: $dialog-top-position-top;
    }
    // å‚ç›´å±…ä¸­å¸ƒå±€
    &.#{$prefix}-dialog--center {
      align-items: center;
    }
  }

  .#{$prefix}-dialog__position_fullscreen {
    // å› ä¸ºå†…å®¹ä¼šè¶…å‡?ä½¿ç”¨flexå¸ƒå±€
    display: flex;
    justify-content: center;
    min-height: 100%;
    width: 100%;
    // é€šè¿‡ä¿®æ”¹positionä¸ºabsoluteè¿›è¡Œæ‹–æ‹½å®šä½
    position: relative;
    box-sizing: border-box;
  }

  .#{$prefix}-is-hidden {
    background: none;
  }

  .#{$prefix}-dialog {
    pointer-events: auto;
    z-index: $z-index-dialog;
  }

  &.#{$prefix}-dialog__ctx--modeless {
    .#{$prefix}-dialog {
      box-shadow: $shadow-3;
    }
  }
}
