{"version":3,"file":"Gradient.js","sources":["../../../components/loading/utils/setStyle.ts","../../../components/loading/circleAdapter.ts","../../../components/loading/Gradient.tsx"],"sourcesContent":["\r\n/**\r\n * 用于为节点增加styles\r\n * @param el HTMLElement\r\n * @param style Styles\r\n */\r\nfunction setStyle(el: HTMLElement, styles): void {\r\n  const keys = Object.keys(styles);\r\n  keys.forEach((key) => {\r\n    // @ts-ignore\r\n    // eslint-disable-next-line no-param-reassign\r\n    el.style[key] = styles[key];\r\n  });\r\n\r\n}\r\n\r\nexport default setStyle;","import setStyle from './utils/setStyle';\r\nimport { getIEVersion } from '../utils/helper';\r\n\r\nexport default function circleAdapter(circleElem: HTMLElement) {\r\n  let basicStyle = {};\r\n\r\n  if (!circleElem || typeof window === 'undefined') {\r\n    return;\r\n  }\r\n\r\n  const { color, fontSize } = window?.getComputedStyle?.(circleElem);\r\n\r\n  // to fix the browser compat of foreignObject in Safari,\r\n  // https://bugs.webkit.org/show_bug.cgi?id=23113\r\n  const ua = window?.navigator?.userAgent;\r\n  const isSafari = /Safari/.test(ua) && !/Chrome/.test(ua);\r\n  // 判断是否为 iOS 下的微信和企业微信\r\n  const isIosWechat =\r\n    /(?=.*iPhone)[?=.*MicroMessenger]/.test(ua) && !/Chrome/.test(ua);\r\n  // 判断是否为 iPadOS 下的微信和企业微信\r\n  const isIpadWechat =\r\n    /(?=.*iPad)[?=.*MicroMessenger]/.test(ua) && !/Chrome/.test(ua);\r\n\r\n  // 注意：chrome上调试mobile/ipad端时，loading出现异常，属于正常现象，不需要修改。\r\n  if (isSafari || isIosWechat || isIpadWechat) {\r\n    basicStyle = {\r\n      transformOrigin: '0px 0px',\r\n      transform: `scale(${parseInt(fontSize, 10) / 12})`,\r\n    };\r\n  }\r\n  // 添加：判断是否为IE浏览器\r\n  if (color && getIEVersion() > 11) {\r\n    const matched = color.match(/[\\d.]+/g);\r\n    const endColor = matched\r\n      ? `rgba(${matched[0]}, ${matched[1]}, ${matched[2]}, 0)`\r\n      : '';\r\n    setStyle(circleElem, {\r\n      ...basicStyle,\r\n      background: `conic-gradient(from 90deg at 50% 50%,${endColor} 0deg, ${color} 360deg)`,\r\n    });\r\n  } else {\r\n    setStyle(circleElem, {\r\n      ...basicStyle,\r\n      background: '',\r\n    });\r\n  }\r\n}\r\n","import React, { useEffect, FC } from 'react';\r\nimport classnames from 'classnames';\r\nimport circleAdapter from './circleAdapter';\r\nimport useDomRefCallback from '../hooks/useDomRefCallback';\r\nimport useConfig from '../hooks/useConfig';\r\n\r\n/**\r\n * Loading组件 渐变部分实现\r\n */\r\nconst GradientLoading: FC = () => {\r\n  const { classPrefix } = useConfig();\r\n  const [conicRef, setConicRef] = useDomRefCallback();\r\n  const gradientClass = `${classPrefix}-loading__gradient`;\r\n\r\n  useEffect(() => {\r\n    const el = conicRef;\r\n    circleAdapter(el);\r\n  }, [conicRef]);\r\n\r\n  return (\r\n    <svg\r\n      className={classnames(gradientClass, `${classPrefix}-icon-loading`)}\r\n      viewBox=\"0 0 12 12\"\r\n      version=\"1.1\"\r\n      width=\"1em\"\r\n      height=\"1em\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      <foreignObject x=\"0\" y=\"0\" width=\"12\" height=\"12\">\r\n        <div className={`${gradientClass}-conic`} ref={setConicRef} />\r\n      </foreignObject>\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport default GradientLoading;\r\n"],"names":["setStyle","el","styles","keys","Object","forEach","key","style","circleAdapter","circleElem","_window","_window$getComputedSt2","_window2","basicStyle","window","_window$getComputedSt","getComputedStyle","call","color","fontSize","ua","navigator","userAgent","isSafari","test","isIosWechat","isIpadWechat","transformOrigin","transform","concat","parseInt","getIEVersion","matched","match","endColor","_objectSpread","background","GradientLoading","_useConfig","useConfig","classPrefix","_useDomRefCallback","useDomRefCallback","_useDomRefCallback2","_slicedToArray","conicRef","setConicRef","gradientClass","useEffect","React","createElement","className","classnames","viewBox","version","width","height","xmlns","x","y","ref"],"mappings":"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"}