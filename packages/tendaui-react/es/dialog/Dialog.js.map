{"version":3,"file":"Dialog.js","sources":["../../../components/hooks/useAttach.ts","../../../components/hooks/useSetState.ts","../../../components/hooks/useMouseEvent.ts","../../../components/dialog/hooks/useDialogDrag.ts","../../../components/dialog/hooks/useDialogEsc.ts","../../../components/dialog/hooks/useDialogPosition.ts","../../../components/utils/getScrollbarWidth.ts","../../../components/dialog/hooks/useLockStyle.ts","../../../components/dialog/utils.ts","../../../components/dialog/Dialog.tsx"],"sourcesContent":["import { useMemo } from 'react';\r\nimport { AttachNode } from '../common';\r\nimport useConfig from './useConfig';\r\n\r\nconst defaultAttach = 'body';\r\n/**\r\n * useAttach\r\n *\r\n * 挂载节点 优先级:\r\n *\r\n * props attach -> globalConfig.attach.component -> globalConfig.attach -> default = 'body'\r\n */\r\nconst useAttach = (name: string, attach: AttachNode | undefined) => {\r\n  const globalConfig = useConfig();\r\n\r\n  const attachVal = useMemo<AttachNode>(\r\n    () =>\r\n      attach ||\r\n      globalConfig?.attach?.[name] ||\r\n      globalConfig?.attach ||\r\n      defaultAttach,\r\n    [name, attach, globalConfig?.attach],\r\n  );\r\n\r\n  return attachVal;\r\n};\r\n\r\nexport default useAttach;\r\n","import { useCallback, useState } from 'react';\r\n\r\nconst isFunction = (arg: unknown) => typeof arg === 'function';\r\n\r\n/**\r\n * 管理 object 类型 state 的 Hooks，用法与 class 组件的 this.setState 基本一致。\r\n * @param initialState\r\n * @returns [state, setMergeState]\r\n */\r\nconst useSetState = <T extends object>(\r\n  initialState: T = {} as T,\r\n): [T, (patch: Partial<T> | ((prevState: T) => Partial<T>)) => void] => {\r\n  const [state, setState] = useState<T>(initialState);\r\n\r\n  const setMergeState = useCallback((patch: Function | Object) => {\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      ...(isFunction(patch) ? patch(prevState) : patch),\r\n    }));\r\n  }, []);\r\n\r\n  return [state, setMergeState];\r\n};\r\n\r\nexport default useSetState;\r\n","import { useEffect, useRef } from 'react';\r\n\r\nexport type MouseEventLike =\r\n  | MouseEvent\r\n  | React.MouseEvent\r\n  | TouchEvent\r\n  | React.TouchEvent;\r\nexport type MouseCallback = MouseEvent | React.MouseEvent | Touch | React.Touch;\r\n\r\n/**\r\n * 鼠标相对当前元素的坐标\r\n */\r\nexport interface MouseCoordinate {\r\n  x: number;\r\n  y: number;\r\n}\r\nexport interface MouseContext {\r\n  coordinate: MouseCoordinate;\r\n}\r\n\r\ntype MouseEventOptions = {\r\n  enabled?: boolean;\r\n  enableTouch?: boolean; // 支持触摸事件\r\n  onDown?: (e: MouseCallback, ctx: MouseContext) => void;\r\n  onMove?: (e: MouseCallback, ctx: MouseContext) => void;\r\n  onUp?: (e: MouseCallback, ctx: MouseContext) => void;\r\n  onEnter?: (e: MouseCallback, ctx: MouseContext) => void;\r\n  onLeave?: (e: MouseCallback, ctx: MouseContext) => void;\r\n};\r\n\r\nconst useMouseEvent = (\r\n  elementRef: React.RefObject<HTMLElement | null>,\r\n  options: MouseEventOptions,\r\n) => {\r\n  const { enabled = true, enableTouch = true } = options;\r\n  const isMovingRef = useRef(false);\r\n\r\n  const normalizeEvent = (e: MouseEventLike) => {\r\n    if (!enableTouch) {\r\n      return e as MouseEvent;\r\n    }\r\n    if ('touches' in e && e.touches.length > 0) {\r\n      return e.touches[0];\r\n    }\r\n    if ('changedTouches' in e && e.changedTouches.length > 0) {\r\n      return e.changedTouches[0];\r\n    }\r\n    if ('clientX' in e && 'clientY' in e) {\r\n      return e as MouseEvent;\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  const getCoordinate = (event: MouseCallback) => {\r\n    const rect = elementRef?.current?.getBoundingClientRect();\r\n    if (!rect) {\r\n      return { x: 0, y: 0 };\r\n    }\r\n    const { clientX, clientY } = event;\r\n    const left = clientX - rect.left;\r\n    const top = clientY - rect.top;\r\n    return {\r\n      x: Math.min(Math.max(0, left), rect.width),\r\n      y: Math.min(Math.max(0, top), rect.height),\r\n    };\r\n  };\r\n\r\n  const emitMouseChange = (\r\n    e: MouseEventLike,\r\n    handler?: (e: MouseCallback, ctx: MouseContext) => void,\r\n  ) => {\r\n    if (!handler) return;\r\n    const event = normalizeEvent(e);\r\n    if (event !== undefined) {\r\n      const coordinate = getCoordinate(event);\r\n      handler(event, { coordinate });\r\n    }\r\n  };\r\n\r\n  const handleMouseMove = (e: MouseEventLike) => {\r\n    if (!isMovingRef.current) return;\r\n    e.preventDefault();\r\n    emitMouseChange(e, options.onMove);\r\n  };\r\n\r\n  const handleMouseUp = (e: MouseEventLike) => {\r\n    if (!isMovingRef.current) return;\r\n    isMovingRef.current = false;\r\n    emitMouseChange(e, options.onUp);\r\n    document.removeEventListener('mouseup', handleMouseUp);\r\n    document.removeEventListener('mousemove', handleMouseMove);\r\n    document.removeEventListener('touchend', handleMouseUp);\r\n    document.removeEventListener('touchmove', handleMouseMove);\r\n  };\r\n\r\n  const handleMouseDown = (e: MouseEventLike) => {\r\n    isMovingRef.current = true;\r\n    emitMouseChange(e, options.onDown);\r\n    document.addEventListener('mouseup', handleMouseUp);\r\n    document.addEventListener('mousemove', handleMouseMove);\r\n    if (!enableTouch) return;\r\n    document.addEventListener('touchend', handleMouseUp);\r\n    document.addEventListener('touchmove', handleMouseMove, { passive: false });\r\n  };\r\n\r\n  const handleMouseEnter = (e: MouseEventLike) => {\r\n    emitMouseChange(e, options.onEnter);\r\n  };\r\n\r\n  const handleMouseLeave = (e: MouseEventLike) => {\r\n    emitMouseChange(e, options.onLeave);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const el = elementRef.current;\r\n    if (!el || !enabled) return;\r\n\r\n    // 基本上只要开启了鼠标事件，就会用到这三个\r\n    // 有的组件虽然只需要 mousemove 的回调结果，但也需要 mousedown 和 mouseup 来控制状态\r\n    el.addEventListener('mousedown', handleMouseDown);\r\n    el.addEventListener('mousemove', handleMouseMove);\r\n    el.addEventListener('mouseup', handleMouseUp);\r\n    // 下面这两个一般是为了处理 hover 状态，可选性监听\r\n    options.onEnter && el.addEventListener('mouseenter', handleMouseEnter);\r\n    options.onLeave && el.addEventListener('mouseleave', handleMouseLeave);\r\n\r\n    if (!enableTouch) return;\r\n    el.addEventListener('touchstart', handleMouseDown, { passive: false });\r\n    el.addEventListener('touchend', handleMouseUp);\r\n\r\n    return () => {\r\n      el.removeEventListener('mousedown', handleMouseDown);\r\n      el.removeEventListener('mouseenter', handleMouseDown);\r\n      el.removeEventListener('mouseleave', handleMouseLeave);\r\n      el.removeEventListener('mousemove', handleMouseMove);\r\n      el.removeEventListener('mouseup', handleMouseUp);\r\n      el.removeEventListener('touchstart', handleMouseDown);\r\n      el.removeEventListener('touchend', handleMouseUp);\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [elementRef.current, options, enabled]);\r\n\r\n  return {\r\n    isMoving: isMovingRef.current,\r\n  };\r\n};\r\n\r\nexport default useMouseEvent;\r\n","import { RefObject, useRef } from 'react';\r\nimport useMouseEvent from '../../hooks/useMouseEvent';\r\n\r\ninterface DialogDragProps {\r\n  dialogCardRef: RefObject<HTMLDivElement | null>;\r\n  canDraggable?: boolean;\r\n}\r\n\r\nconst useDialogDrag = (props: DialogDragProps) => {\r\n  const { dialogCardRef, canDraggable } = props;\r\n\r\n  const validWindow = typeof window === 'object';\r\n  const screenHeight = validWindow\r\n    ? window.innerHeight || document.documentElement.clientHeight\r\n    : undefined;\r\n  const screenWidth = validWindow\r\n    ? window.innerWidth || document.documentElement.clientWidth\r\n    : undefined;\r\n\r\n  const dragOffset = useRef({ x: 0, y: 0 });\r\n\r\n  useMouseEvent(dialogCardRef, {\r\n    enabled: canDraggable,\r\n    onDown: (e) => {\r\n      if (\r\n        !validWindow ||\r\n        screenWidth === undefined ||\r\n        screenHeight === undefined ||\r\n        !dialogCardRef.current\r\n      )\r\n        return;\r\n      const { offsetLeft, offsetTop, offsetWidth, offsetHeight, style } =\r\n        dialogCardRef.current;\r\n      if (offsetWidth > screenWidth || offsetHeight > screenHeight) return;\r\n      style.cursor = 'move';\r\n      dragOffset.current = {\r\n        x: e.clientX - offsetLeft,\r\n        y: e.clientY - offsetTop,\r\n      };\r\n    },\r\n    onMove: (e) => {\r\n      if (\r\n        !validWindow ||\r\n        screenWidth === undefined ||\r\n        screenHeight === undefined ||\r\n        !dialogCardRef.current\r\n      )\r\n        return;\r\n      const { offsetWidth, offsetHeight, style } = dialogCardRef.current;\r\n      let diffX = e.clientX - dragOffset.current.x;\r\n      let diffY = e.clientY - dragOffset.current.y;\r\n      // 拖拽上左边界限制\r\n      if (diffX < 0) diffX = 0;\r\n      if (diffY < 0) diffY = 0;\r\n      if (screenWidth - offsetWidth - diffX < 0)\r\n        diffX = screenWidth - offsetWidth;\r\n      if (screenHeight - offsetHeight - diffY < 0)\r\n        diffY = screenHeight - offsetHeight;\r\n      style.position = 'absolute';\r\n      style.left = `${diffX}px`;\r\n      style.top = `${diffY}px`;\r\n    },\r\n    onUp: () => {\r\n      if (dialogCardRef.current) dialogCardRef.current.style.cursor = 'default';\r\n    },\r\n  });\r\n};\r\n\r\nexport default useDialogDrag;\r\n","import { useEffect, type RefObject } from 'react';\r\n\r\nconst dialogSet: Set<RefObject<HTMLElement | null>> = new Set();\r\n\r\nconst useDialogEsc = (\r\n  visible: boolean | undefined,\r\n  dialog: RefObject<HTMLElement | null>,\r\n) => {\r\n  useEffect(() => {\r\n    if (visible) {\r\n      // 将 dialog 添加至 Set 对象\r\n      if (dialog?.current) {\r\n        dialogSet.add(dialog);\r\n        dialog?.current?.focus();\r\n      }\r\n    } else if (dialogSet.has(dialog)) {\r\n      // 将 dialog 从 Set 对象删除\r\n      dialogSet.delete(dialog);\r\n      const dialogList = [...dialogSet];\r\n      // 将 Set 对象中最后一个 dialog 设置为 focus\r\n      dialogList[dialogList.length - 1]?.current?.focus();\r\n    }\r\n    return () => {\r\n      // 从 Set 对象删除无效的 dialog\r\n      dialogSet.forEach((item) => {\r\n        if (item?.current === null) {\r\n          dialogSet.delete(item);\r\n        }\r\n      });\r\n    };\r\n  }, [visible, dialog]);\r\n};\r\n\r\nexport default useDialogEsc;\r\n","import { RefObject, useEffect, useRef } from 'react';\r\nimport useIsomorphicLayoutEffect from '../../hooks/useLayoutEffect';\r\ntype Position = { x: number; y: number };\r\nexport default function useDialogPosition(\r\n  visible: boolean | undefined,\r\n  dialogCardRef: RefObject<HTMLElement | null>,\r\n) {\r\n  const mousePosRef = useRef<Position>(null);\r\n\r\n  const getClickPosition = (e: MouseEvent) => {\r\n    if (mousePosRef) {\r\n      mousePosRef.current = {\r\n        x: e.clientX,\r\n        y: e.clientY,\r\n      };\r\n      setTimeout(() => {\r\n        mousePosRef.current = null;\r\n      }, 100);\r\n    }\r\n  };\r\n\r\n  useIsomorphicLayoutEffect(() => {\r\n    document.addEventListener('click', getClickPosition, true);\r\n    return () => {\r\n      document.removeEventListener('click', getClickPosition, true);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!visible) return;\r\n    // 动画渲染初始位置\r\n    if (mousePosRef.current && dialogCardRef.current) {\r\n      // eslint-disable-next-line\r\n      dialogCardRef.current.style.transformOrigin = `${mousePosRef.current.x - dialogCardRef.current.offsetLeft}px ${\r\n        mousePosRef.current.y - dialogCardRef.current.offsetTop\r\n      }px`;\r\n    }\r\n  }, [visible, dialogCardRef]);\r\n}\r\n","/**\r\n * @description: Calculate scroll bar width\r\n * @param container  Container used to calculate scrollbar width\r\n * @default container: document.body\r\n */\r\nexport function getScrollbarWidth(container: HTMLElement = document.body) {\r\n  if (container === document.body) {\r\n    return window.innerWidth - document.documentElement.clientWidth;\r\n  }\r\n  return container.offsetWidth - container.clientWidth;\r\n}\r\n","import { useRef, useCallback } from 'react';\r\nimport { getScrollbarWidth } from '../../utils/getScrollbarWidth';\r\nimport useLayoutEffect from '../../hooks/useLayoutEffect';\r\nimport type { TdDialogProps } from '../type';\r\nlet key = 1;\r\n\r\nexport default function useDialogLockStyle({\r\n  preventScrollThrough,\r\n  visible,\r\n  mode,\r\n  showInAttachedElement,\r\n}: Partial<TdDialogProps>) {\r\n  const lockStyleRef = useRef<HTMLStyleElement>(null);\r\n  const timerRef = useRef<ReturnType<typeof setTimeout> | null>(null);\r\n\r\n  const clearStyleFunc = useCallback(() => {\r\n    if (timerRef.current) {\r\n      clearTimeout(timerRef.current);\r\n    }\r\n    timerRef.current = setTimeout(() => {\r\n      lockStyleRef.current?.parentNode?.removeChild?.(lockStyleRef.current);\r\n    }, 150);\r\n  }, []);\r\n\r\n  useLayoutEffect(() => {\r\n    if (typeof document === 'undefined' || !visible) return;\r\n    if (!lockStyleRef.current) {\r\n      lockStyleRef.current = document.createElement('style');\r\n    }\r\n    const hasScrollBar =\r\n      document.documentElement.scrollHeight >\r\n      document.documentElement.clientHeight;\r\n    const scrollbarWidth = hasScrollBar ? getScrollbarWidth() : 0;\r\n\r\n    lockStyleRef.current.dataset.id = `td_dialog_${+new Date()}_${(key += 1)}`;\r\n    lockStyleRef.current.innerHTML = `\r\n      html body {\r\n        overflow-y: hidden;\r\n        width: calc(100% - ${scrollbarWidth}px);\r\n      }\r\n    `;\r\n\r\n    return clearStyleFunc;\r\n  }, [visible, clearStyleFunc]);\r\n\r\n  useLayoutEffect(() => {\r\n    if (typeof document === 'undefined') return;\r\n    if (mode !== 'modal' || !preventScrollThrough || showInAttachedElement)\r\n      return;\r\n\r\n    if (visible) {\r\n      if (lockStyleRef.current) document.head.appendChild(lockStyleRef.current);\r\n    } else {\r\n      clearStyleFunc();\r\n    }\r\n  }, [\r\n    preventScrollThrough,\r\n    visible,\r\n    mode,\r\n    showInAttachedElement,\r\n    clearStyleFunc,\r\n  ]);\r\n}\r\n","export function parseValueToPx(value: number | string) {\r\n  if (typeof value === 'number') return `${value}px`;\r\n  return value;\r\n}\r\n","import React, { forwardRef, useEffect, useImperativeHandle, useRef } from 'react';\r\nimport { CSSTransition } from 'react-transition-group';\r\nimport classNames from 'classnames';\r\nimport { isUndefined } from 'lodash-es';\r\nimport type { StyledProps } from '../common';\r\nimport Portal from '../common/Portal';\r\nimport useAttach from '../hooks/useAttach';\r\nimport useConfig from '../hooks/useConfig';\r\nimport useDefaultProps from '../hooks/useDefaultProps';\r\nimport useSetState from '../hooks/useSetState';\r\n// import { useLocaleReceiver } from '../locale/LocalReceiver';\r\nimport { dialogDefaultProps } from './defaultProps';\r\nimport DialogCard from './DialogCard';\r\nimport useDialogDrag from './hooks/useDialogDrag';\r\nimport useDialogEsc from './hooks/useDialogEsc';\r\nimport useDialogPosition from './hooks/useDialogPosition';\r\nimport useLockStyle from './hooks/useLockStyle';\r\nimport type { DialogInstance, TdDialogProps } from './type';\r\nimport { parseValueToPx } from './utils';\r\n\r\nexport interface DialogProps extends TdDialogProps, StyledProps {\r\n    isPlugin?: boolean; // 是否以插件形式调用\r\n}\r\n\r\nconst Dialog = forwardRef<DialogInstance, DialogProps>((originalProps, ref) => {\r\n    const props = useDefaultProps<DialogProps>(originalProps, dialogDefaultProps);\r\n    const { children, ...restProps } = props;\r\n    const { classPrefix } = useConfig();\r\n\r\n    const componentCls = `${classPrefix}-dialog`;\r\n    const wrapRef = useRef<HTMLDivElement>(null);\r\n    const contentClickRef = useRef(false);\r\n    const dialogCardRef = useRef<HTMLDivElement>(null);\r\n    const dialogPosition = useRef(null);\r\n    const portalRef = useRef(null);\r\n    const maskRef = useRef(null)\r\n    const [state, setState] = useSetState<DialogProps>({ isPlugin: false, ...restProps });\r\n    // const [local] = useLocaleReceiver('dialog');\r\n\r\n    const {\r\n        className,\r\n        dialogClassName,\r\n        style,\r\n        width,\r\n        mode,\r\n        zIndex,\r\n        visible,\r\n        attach,\r\n        onBeforeOpen,\r\n        onBeforeClose,\r\n        onOpened,\r\n        onCancel,\r\n        onConfirm,\r\n        onClose,\r\n        onClosed,\r\n        isPlugin,\r\n        draggable,\r\n        onOverlayClick,\r\n        onEscKeydown,\r\n        closeOnEscKeydown,\r\n        confirmOnEnter,\r\n        showOverlay,\r\n        showInAttachedElement,\r\n        closeOnOverlayClick,\r\n        destroyOnClose,\r\n        preventScrollThrough,\r\n        onCloseBtnClick,\r\n        forceRender,\r\n        lazy,\r\n        ...restState\r\n    } = state;\r\n\r\n    const dialogAttach = useAttach('dialog', attach);\r\n\r\n    useLockStyle({ preventScrollThrough, visible, mode, showInAttachedElement });\r\n    useDialogEsc(visible, wrapRef);\r\n    useDialogPosition(visible, dialogCardRef);\r\n    useDialogDrag({\r\n        dialogCardRef,\r\n        canDraggable: draggable && mode === 'modeless',\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (isPlugin) {\r\n            return;\r\n        }\r\n        // 插件式调用不会更新props, 只有组件式调用才会更新props\r\n        setState((prevState) => ({ ...prevState, ...props }));\r\n    }, [props, setState, isPlugin]);\r\n\r\n    useImperativeHandle(ref, () => ({\r\n        show() {\r\n            setState({ visible: true });\r\n        },\r\n        hide() {\r\n            setState({ visible: false });\r\n        },\r\n        setConfirmLoading: (loading: boolean) => {\r\n            setState({ confirmLoading: loading });\r\n        },\r\n        destroy() {\r\n            setState({ visible: false, destroyOnClose: true });\r\n        },\r\n        update(newOptions) {\r\n            setState((prevState) => ({ ...prevState, ...newOptions }));\r\n        },\r\n    }));\r\n\r\n\r\n\r\n    const onMaskClick = (e: React.MouseEvent<HTMLDivElement>) => {\r\n        if (showOverlay && (closeOnOverlayClick)) {\r\n            // 判断点击事件初次点击是否为内容区域\r\n            if (contentClickRef.current) {\r\n                contentClickRef.current = false;\r\n            } else if (e.target === dialogPosition.current) {\r\n                onOverlayClick?.({ e });\r\n                onClose?.({ e, trigger: 'overlay' });\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleCancel = ({ e }) => {\r\n        onCancel?.({ e });\r\n        onClose?.({ e, trigger: 'cancel' });\r\n    };\r\n\r\n    const handleClose = ({ e }) => {\r\n        onCloseBtnClick?.({ e });\r\n        onClose?.({ e, trigger: 'close-btn' });\r\n    };\r\n\r\n    const handleKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\r\n        // https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode\r\n        if (e.key === 'Escape') {\r\n            e.stopPropagation();\r\n            onEscKeydown?.({ e });\r\n            if (closeOnEscKeydown) {\r\n                onClose?.({ e, trigger: 'esc' });\r\n            }\r\n        } else if (e.key === 'Enter' || e.key === 'NumpadEnter') {\r\n            // 回车键触发点击确认事件\r\n            e.stopPropagation();\r\n            confirmOnEnter && onConfirm?.({ e });\r\n        }\r\n    };\r\n\r\n    const onAnimateLeave = () => {\r\n        onClosed?.();\r\n\r\n        if (!wrapRef.current) return;\r\n        wrapRef.current.style.display = 'none';\r\n    };\r\n\r\n    const onAnimateStart = () => {\r\n        if (!wrapRef.current) return;\r\n        onBeforeOpen?.();\r\n        wrapRef.current.style.display = 'block';\r\n    };\r\n\r\n    const onInnerAnimateStart = () => {\r\n        if (!dialogCardRef.current) return;\r\n        dialogCardRef.current.style.display = 'block';\r\n    };\r\n\r\n    const onInnerAnimateLeave = () => {\r\n        if (!dialogCardRef.current) return;\r\n        dialogCardRef.current.style.display = 'none';\r\n    };\r\n\r\n    const renderMask = () => {\r\n        if (mode !== 'modal') return null;\r\n\r\n        return showOverlay ? (\r\n            <CSSTransition\r\n                in={visible}\r\n                appear\r\n                timeout={300}\r\n                classNames={`${componentCls}-fade`}\r\n                mountOnEnter\r\n                unmountOnExit\r\n                nodeRef={maskRef}\r\n            >\r\n                <div ref={maskRef} className={`${componentCls}__mask`} />\r\n            </CSSTransition>\r\n        ) : null;\r\n    };\r\n    return (\r\n        <CSSTransition\r\n            in={visible}\r\n            appear\r\n            timeout={300}\r\n            mountOnEnter={isUndefined(forceRender) ? lazy : !forceRender}\r\n            unmountOnExit={destroyOnClose}\r\n            nodeRef={portalRef}\r\n            onEnter={onAnimateStart}\r\n            onEntered={onOpened}\r\n            onExit={() => onBeforeClose?.()}\r\n            onExited={onAnimateLeave}\r\n        >\r\n            <Portal attach={dialogAttach} ref={portalRef}>\r\n                <div\r\n                    ref={wrapRef}\r\n                    className={classNames(className, `${componentCls}__ctx`, `${componentCls}__${mode}`, {\r\n                        [`${componentCls}__ctx--fixed`]: !showInAttachedElement,\r\n                        [`${componentCls}__ctx--absolute`]: showInAttachedElement,\r\n                    })}\r\n                    style={{ zIndex, display: 'none' }}\r\n                    onKeyDown={handleKeyDown}\r\n                    tabIndex={0}\r\n                >\r\n                    {renderMask()}\r\n                    <div className={`${componentCls}__wrap`}>\r\n                        <div\r\n                            ref={dialogPosition}\r\n                            className={classNames(`${componentCls}__position`, {\r\n                                [`${componentCls}--top`]: !!props.top || props.placement === 'top',\r\n                                [`${componentCls}--center`]: props.placement === 'center' && !props.top,\r\n                            })}\r\n                            style={{ paddingTop: parseValueToPx(props.top) }}\r\n                            onClick={onMaskClick}\r\n                        >\r\n                            <CSSTransition\r\n                                in={visible}\r\n                                appear\r\n                                timeout={300}\r\n                                classNames={`${componentCls}-zoom`}\r\n                                nodeRef={dialogCardRef}\r\n                                onEnter={onInnerAnimateStart}\r\n                                onExited={onInnerAnimateLeave}\r\n                            >\r\n                                <DialogCard\r\n                                    ref={dialogCardRef}\r\n                                    {...restState}\r\n                                    className={dialogClassName}\r\n                                    style={{ ...style, width: parseValueToPx(width || style?.width) }}\r\n                                    onConfirm={onConfirm}\r\n                                    onCancel={handleCancel}\r\n                                    onCloseBtnClick={handleClose}\r\n                                >\r\n                                    {children as React.ReactNode}\r\n                                </DialogCard>\r\n                            </CSSTransition>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </Portal>\r\n        </CSSTransition>\r\n    );\r\n});\r\n\r\nDialog.displayName = 'Dialog';\r\n\r\nexport default Dialog;\r\n"],"names":["defaultAttach","useAttach","name","attach","globalConfig","useConfig","attachVal","useMemo","_globalConfig$attach","isFunction","arg","useSetState","initialState","arguments","length","undefined","_useState","useState","_useState2","_slicedToArray","state","setState","setMergeState","useCallback","patch","prevState","_objectSpread","useMouseEvent","elementRef","options","_options$enabled","enabled","_options$enableTouch","enableTouch","isMovingRef","useRef","normalizeEvent","e","touches","changedTouches","getCoordinate","event","_elementRef$current","rect","current","getBoundingClientRect","x","y","clientX","clientY","left","top","Math","min","max","width","height","emitMouseChange","handler","coordinate","handleMouseMove","preventDefault","onMove","handleMouseUp","onUp","document","removeEventListener","handleMouseDown","onDown","addEventListener","passive","handleMouseEnter","onEnter","handleMouseLeave","onLeave","useEffect","el","isMoving","useDialogDrag","props","dialogCardRef","canDraggable","validWindow","window","_typeof","screenHeight","innerHeight","documentElement","clientHeight","screenWidth","innerWidth","clientWidth","dragOffset","_dialogCardRef$curren","offsetLeft","offsetTop","offsetWidth","offsetHeight","style","cursor","_dialogCardRef$curren2","diffX","diffY","position","concat","dialogSet","Set","useDialogEsc","visible","dialog","_dialog$current","add","focus","has","_dialogList","dialogList","_toConsumableArray","forEach","item","useDialogPosition","mousePosRef","getClickPosition","setTimeout","useIsomorphicLayoutEffect","transformOrigin","getScrollbarWidth","container","body","key","useDialogLockStyle","_ref","preventScrollThrough","mode","showInAttachedElement","lockStyleRef","timerRef","clearStyleFunc","clearTimeout","_lockStyleRef$current","_lockStyleRef$current2","parentNode","removeChild","call","useLayoutEffect","createElement","hasScrollBar","scrollHeight","scrollbarWidth","dataset","id","Date","innerHTML","head","appendChild","parseValueToPx","value","Dialog","forwardRef","originalProps","ref","useDefaultProps","dialogDefaultProps","children","restProps","_objectWithoutProperties","_excluded","_useConfig","classPrefix","componentCls","wrapRef","contentClickRef","dialogPosition","portalRef","maskRef","_useSetState","isPlugin","_useSetState2","className","dialogClassName","zIndex","onBeforeOpen","onBeforeClose","onOpened","onCancel","onConfirm","onClose","onClosed","draggable","onOverlayClick","onEscKeydown","closeOnEscKeydown","confirmOnEnter","showOverlay","closeOnOverlayClick","destroyOnClose","onCloseBtnClick","forceRender","lazy","restState","_excluded2","dialogAttach","useLockStyle","useImperativeHandle","show","hide","setConfirmLoading","loading","confirmLoading","destroy","update","newOptions","onMaskClick","target","trigger","handleCancel","handleClose","_ref2","handleKeyDown","stopPropagation","onAnimateLeave","display","onAnimateStart","onInnerAnimateStart","onInnerAnimateLeave","renderMask","React","CSSTransition","appear","timeout","classNames","mountOnEnter","unmountOnExit","nodeRef","isUndefined","onEntered","onExit","onExited","Portal","_defineProperty","onKeyDown","tabIndex","placement","paddingTop","onClick","DialogCard","_extends","displayName"],"mappings":"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"}