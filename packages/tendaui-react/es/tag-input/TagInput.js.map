{"version":3,"file":"TagInput.js","sources":["../../../components/tag-input/hooks/useTagScroll.ts","../../../components/tag-input/hooks/useHover.ts","../../../components/tag-input/defaultProps.ts","../../../components/tag-input/TagInput.tsx"],"sourcesContent":["/**\r\n * 当标签数量过多时，输入框显示不下，则需要滚动查看，以下为滚动逻辑\r\n * 如果标签过多时的处理方式，是标签省略，则不需要此功能\r\n */\r\n\r\nimport { isFunction } from 'lodash-es';\r\nimport { useRef, useEffect, useState, WheelEvent } from 'react';\r\nimport { TdTagInputProps } from '../type';\r\n\r\nlet mouseEnterTimer: ReturnType<typeof setTimeout> | null = null;\r\n\r\nexport default function useTagScroll(props: TdTagInputProps) {\r\n  const tagInputRef = useRef<{ currentElement: HTMLDivElement }>(null);\r\n  const { excessTagsDisplayType = 'scroll', readonly, disabled } = props;\r\n  // 允许向右滚动的最大距离\r\n  const [scrollDistance, setScrollDistance] = useState(0);\r\n  const [scrollElement, setScrollElement] = useState<HTMLDivElement>();\r\n\r\n  const updateScrollElement = (element: HTMLDivElement) => {\r\n    const scrollElement = element.children[0] as HTMLDivElement;\r\n    setScrollElement(scrollElement);\r\n  };\r\n\r\n  const updateScrollDistance = () => {\r\n    if (!scrollElement) return;\r\n    setScrollDistance(scrollElement.scrollWidth - scrollElement.clientWidth);\r\n  };\r\n\r\n  const scrollTo = (distance: number) => {\r\n    if (isFunction(scrollElement?.scroll)) {\r\n      scrollElement.scroll({ left: distance, behavior: 'smooth' });\r\n    }\r\n  };\r\n\r\n  const scrollToRight = () => {\r\n    updateScrollDistance();\r\n    scrollTo(scrollDistance);\r\n  };\r\n\r\n  const scrollToLeft = () => {\r\n    scrollTo(0);\r\n  };\r\n\r\n  // TODO：MAC 电脑横向滚动，Windows 纵向滚动。当前只处理了横向滚动\r\n  const onWheel = ({ e }: { e: WheelEvent<HTMLDivElement> }) => {\r\n    if (readonly || disabled) return;\r\n    if (!scrollElement) return;\r\n    if (e.deltaX > 0) {\r\n      const distance = Math.min(scrollElement.scrollLeft + 120, scrollDistance);\r\n      scrollTo(distance);\r\n    } else {\r\n      const distance = Math.max(scrollElement.scrollLeft - 120, 0);\r\n      scrollTo(distance);\r\n    }\r\n  };\r\n\r\n  // 鼠标 hover，自动滑动到最右侧，以便输入新标签\r\n  const scrollToRightOnEnter = () => {\r\n    if (excessTagsDisplayType !== 'scroll') return;\r\n    // 一闪而过的 mousenter 不需要执行\r\n    mouseEnterTimer = setTimeout(() => {\r\n      scrollToRight();\r\n      if (mouseEnterTimer) clearTimeout(mouseEnterTimer);\r\n    }, 100);\r\n  };\r\n\r\n  const scrollToLeftOnLeave = () => {\r\n    if (excessTagsDisplayType !== 'scroll') return;\r\n    scrollTo(0);\r\n    if (mouseEnterTimer) {\r\n      clearTimeout(mouseEnterTimer);\r\n    }\r\n  };\r\n\r\n  const clearScroll = () => {\r\n    if (mouseEnterTimer) clearTimeout(mouseEnterTimer);\r\n  };\r\n\r\n  const initScroll = (element: HTMLDivElement) => {\r\n    if (!element) return;\r\n    updateScrollElement(element);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (tagInputRef.current) initScroll(tagInputRef?.current?.currentElement);\r\n    return clearScroll;\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return {\r\n    initScroll,\r\n    clearScroll,\r\n    tagInputRef,\r\n    scrollElement,\r\n    scrollDistance,\r\n    scrollTo,\r\n    scrollToRight,\r\n    scrollToLeft,\r\n    updateScrollElement,\r\n    updateScrollDistance,\r\n    onWheel,\r\n    scrollToRightOnEnter,\r\n    scrollToLeftOnLeave,\r\n  };\r\n}\r\n","import { useState, MouseEvent } from 'react';\r\nimport { TdTagInputProps } from '../type';\r\n\r\nexport interface UseHoverParams {\r\n  readonly: boolean;\r\n  disabled: boolean;\r\n  onMouseenter: (context: { e: MouseEvent<HTMLDivElement> }) => void;\r\n  onMouseleave: (context: { e: MouseEvent<HTMLDivElement> }) => void;\r\n}\r\n\r\nexport default function useHover(props: TdTagInputProps) {\r\n  const { readonly, disabled, onMouseenter, onMouseleave } = props;\r\n  const [isHover, setIsHover] = useState<boolean>(false);\r\n\r\n  const addHover = (context: Parameters<UseHoverParams['onMouseenter']>[0]) => {\r\n    if (readonly || disabled) return;\r\n    setIsHover(true);\r\n    onMouseenter?.(context);\r\n  };\r\n\r\n  const cancelHover = (\r\n    context: Parameters<UseHoverParams['onMouseleave']>[0],\r\n  ) => {\r\n    if (readonly || disabled) return;\r\n    setIsHover(false);\r\n    onMouseleave?.(context);\r\n  };\r\n\r\n  return { isHover, addHover, cancelHover };\r\n}\r\n","import { TdTagInputProps } from './type';\r\n\r\nexport const tagInputDefaultProps: TdTagInputProps = {\r\n  autoWidth: false,\r\n  borderless: false,\r\n  clearable: false,\r\n  dragSort: false,\r\n  excessTagsDisplayType: 'break-line',\r\n  defaultInputValue: '',\r\n  minCollapsedNum: 0,\r\n  placeholder: undefined,\r\n  readonly: false,\r\n  size: 'medium',\r\n  defaultValue: [],\r\n};\r\n","import React, {\r\n  CompositionEvent,\r\n  KeyboardEvent,\r\n  useRef,\r\n  useImperativeHandle,\r\n  forwardRef,\r\n  MouseEvent,\r\n} from 'react';\r\nimport { XCircle } from 'lucide-react';\r\nimport { isFunction } from 'lodash-es';\r\nimport classnames from 'classnames';\r\nimport useConfig from '../hooks/useConfig';\r\nimport TInput, { InputValue, InputRef } from '../input';\r\nimport { TdTagInputProps } from './type';\r\nimport useTagList from './hooks/useTagList';\r\nimport useTagScroll from './hooks/useTagScroll';\r\nimport useHover from './hooks/useHover';\r\nimport useControlled from '../hooks/useControlled';\r\nimport { StyledProps } from '../common';\r\nimport { tagInputDefaultProps } from './defaultProps';\r\nimport useDefaultProps from '../hooks/useDefaultProps';\r\nimport useGlobalIcon from '../hooks/useGlobalIcon';\r\nimport useDragSorter from '../hooks/useDragSorter';\r\n\r\nexport interface TagInputProps extends TdTagInputProps, StyledProps {\r\n  options?: any[]; // 参数穿透options, 给SelectInput/SelectInput 自定义选中项呈现的内容和多选状态下设置折叠项内容\r\n}\r\n\r\nconst TagInput = forwardRef<InputRef, TagInputProps>((originalProps, ref) => {\r\n  const props = useDefaultProps<TagInputProps>(\r\n    originalProps,\r\n    tagInputDefaultProps,\r\n  );\r\n  const { classPrefix: prefix } = useConfig();\r\n\r\n  const { CloseCircleFilledIcon } = useGlobalIcon({\r\n    CloseCircleFilledIcon: XCircle,\r\n  });\r\n\r\n  const {\r\n    excessTagsDisplayType,\r\n    autoWidth,\r\n    borderless,\r\n    readonly,\r\n    disabled,\r\n    clearable,\r\n    placeholder,\r\n    valueDisplay,\r\n    label,\r\n    inputProps,\r\n    size,\r\n    tips,\r\n    status,\r\n    suffixIcon,\r\n    suffix,\r\n    prefixIcon,\r\n    maxRows,\r\n    onClick,\r\n    onPaste,\r\n    onFocus,\r\n    onBlur,\r\n  } = props;\r\n\r\n  const [tInputValue, setTInputValue] = useControlled(\r\n    props,\r\n    'inputValue',\r\n    props.onInputChange,\r\n  );\r\n\r\n  const { isHover, addHover, cancelHover } = useHover(props);\r\n  const { getDragProps } = useDragSorter({\r\n    ...props,\r\n    sortOnDraggable: props.dragSort,\r\n    onDragOverCheck: {\r\n      x: true,\r\n      targetClassNameRegExp: new RegExp(`^${prefix}-tag`),\r\n    },\r\n  });\r\n  const isCompositionRef = useRef(false);\r\n\r\n  const {\r\n    scrollToRight,\r\n    onWheel,\r\n    scrollToRightOnEnter,\r\n    scrollToLeftOnLeave,\r\n    tagInputRef,\r\n  } = useTagScroll(props);\r\n  // handle tag add and remove\r\n  const {\r\n    tagValue,\r\n    onClose,\r\n    onInnerEnter,\r\n    onInputBackspaceKeyUp,\r\n    clearAll,\r\n    renderLabel,\r\n    onInputBackspaceKeyDown,\r\n  } = useTagList({\r\n    ...props,\r\n    getDragProps,\r\n  });\r\n  const NAME_CLASS = `${prefix}-tag-input`;\r\n  const WITH_SUFFIX_ICON_CLASS = `${prefix}-tag-input__with-suffix-icon`;\r\n  const CLEAR_CLASS = `${prefix}-tag-input__suffix-clear`;\r\n  const BREAK_LINE_CLASS = `${prefix}-tag-input--break-line`;\r\n\r\n  const tagInputPlaceholder = !tagValue?.length ? placeholder : '';\r\n\r\n  const showClearIcon = Boolean(\r\n    !readonly && !disabled && clearable && isHover && tagValue?.length,\r\n  );\r\n\r\n  useImperativeHandle(ref as InputRef, () => ({\r\n    ...(tagInputRef.current || {}),\r\n  }));\r\n\r\n  const onInputCompositionstart = (\r\n    value: InputValue,\r\n    context: { e: CompositionEvent<HTMLInputElement> },\r\n  ) => {\r\n    isCompositionRef.current = true;\r\n    inputProps?.onCompositionstart?.(value, context);\r\n  };\r\n\r\n  const onInputCompositionend = (\r\n    value: InputValue,\r\n    context: { e: CompositionEvent<HTMLInputElement> },\r\n  ) => {\r\n    isCompositionRef.current = false;\r\n    inputProps?.onCompositionend?.(value, context);\r\n  };\r\n\r\n  const onInputEnter = (\r\n    value: InputValue,\r\n    context: { e: KeyboardEvent<HTMLInputElement> },\r\n  ) => {\r\n    setTInputValue('', { e: context.e, trigger: 'enter' });\r\n    !isCompositionRef.current && onInnerEnter(value, context);\r\n    scrollToRight();\r\n  };\r\n\r\n  const onInnerClick = (context: { e: MouseEvent<HTMLDivElement> }) => {\r\n    if (!props.disabled && !props.readonly) {\r\n      (tagInputRef.current as any)?.inputElement?.focus?.();\r\n    }\r\n    onClick?.(context);\r\n  };\r\n\r\n  const onClearClick = (e: MouseEvent<SVGSVGElement>) => {\r\n    clearAll({ e });\r\n    setTInputValue('', { e, trigger: 'clear' });\r\n    props.onClear?.({ e });\r\n  };\r\n\r\n  const suffixIconNode = showClearIcon ? (\r\n    <CloseCircleFilledIcon className={CLEAR_CLASS} onClick={onClearClick} />\r\n  ) : (\r\n    suffixIcon\r\n  );\r\n\r\n  // 自定义 Tag 节点\r\n  const displayNode = isFunction(valueDisplay)\r\n    ? valueDisplay({\r\n      value: tagValue,\r\n      onClose: (index) => onClose({ index }),\r\n    })\r\n    : valueDisplay;\r\n\r\n  const isEmpty = !(Array.isArray(tagValue) && tagValue.length);\r\n\r\n  const classes = [\r\n    NAME_CLASS,\r\n    {\r\n      [BREAK_LINE_CLASS]: excessTagsDisplayType === 'break-line',\r\n      [WITH_SUFFIX_ICON_CLASS]: !!suffixIconNode,\r\n      [`${prefix}-is-empty`]: isEmpty,\r\n      [`${prefix}-tag-input--with-tag`]: !isEmpty,\r\n      [`${prefix}-tag-input--max-rows`]:\r\n        excessTagsDisplayType === 'break-line' && maxRows,\r\n      [`${prefix}-tag-input--drag-sort`]:\r\n        props.dragSort && !disabled && !readonly,\r\n    },\r\n    props.className,\r\n  ];\r\n\r\n  const maxRowsStyle = maxRows\r\n    ? ({\r\n      '--max-rows': maxRows,\r\n      '--tag-input-size': size,\r\n    } as React.CSSProperties)\r\n    : {};\r\n\r\n  return (\r\n    <TInput\r\n      ref={tagInputRef as any}\r\n      value={tInputValue}\r\n      onChange={(val, context) => {\r\n        setTInputValue(val, { ...context, trigger: 'input' });\r\n      }}\r\n      autoWidth={true} // 控制input_inner的宽度 设置为true让内部input不会提前换行\r\n      onWheel={onWheel}\r\n      size={size}\r\n      borderless={borderless}\r\n      readonly={readonly}\r\n      disabled={disabled}\r\n      label={renderLabel({ displayNode, label })}\r\n      className={classnames(classes)}\r\n      style={{\r\n        ...props.style,\r\n        ...maxRowsStyle,\r\n      }}\r\n      tips={tips}\r\n      status={status}\r\n      placeholder={tagInputPlaceholder}\r\n      suffix={suffix}\r\n      prefixIcon={prefixIcon}\r\n      suffixIcon={suffixIconNode}\r\n      showInput={!inputProps?.readonly || !tagValue || !tagValue?.length}\r\n      keepWrapperWidth={!autoWidth}\r\n      onPaste={onPaste}\r\n      onClick={onInnerClick}\r\n      onEnter={onInputEnter}\r\n      onKeydown={onInputBackspaceKeyDown}\r\n      onKeyup={onInputBackspaceKeyUp}\r\n      onMouseenter={(context) => {\r\n        addHover(context);\r\n        scrollToRightOnEnter();\r\n      }}\r\n      onMouseleave={(context) => {\r\n        cancelHover(context);\r\n        scrollToLeftOnLeave();\r\n      }}\r\n      onFocus={(inputValue, context) => {\r\n        onFocus?.(tagValue, { e: context.e, inputValue });\r\n      }}\r\n      onBlur={(inputValue, context) => {\r\n        if (tInputValue) {\r\n          setTInputValue('', { e: context.e, trigger: 'blur' });\r\n        }\r\n        onBlur?.(tagValue, { e: context.e, inputValue: '' });\r\n      }}\r\n      onCompositionstart={onInputCompositionstart}\r\n      onCompositionend={onInputCompositionend}\r\n      {...inputProps}\r\n    />\r\n  );\r\n});\r\n\r\nTagInput.displayName = 'TagInput';\r\n\r\nexport default TagInput;\r\n"],"names":["mouseEnterTimer","useTagScroll","props","tagInputRef","useRef","_props$excessTagsDisp","excessTagsDisplayType","readonly","disabled","_useState","useState","_useState2","_slicedToArray","scrollDistance","setScrollDistance","_useState3","_useState4","scrollElement","setScrollElement","updateScrollElement","element","children","updateScrollDistance","scrollWidth","clientWidth","scrollTo","distance","isFunction","scroll","left","behavior","scrollToRight","scrollToLeft","onWheel","_ref","e","deltaX","Math","min","scrollLeft","max","scrollToRightOnEnter","setTimeout","clearTimeout","scrollToLeftOnLeave","clearScroll","initScroll","useEffect","_tagInputRef$current","current","currentElement","useHover","onMouseenter","onMouseleave","isHover","setIsHover","addHover","context","cancelHover","tagInputDefaultProps","autoWidth","borderless","clearable","dragSort","defaultInputValue","minCollapsedNum","placeholder","undefined","size","defaultValue","TagInput","forwardRef","originalProps","ref","useDefaultProps","_useConfig","useConfig","prefix","classPrefix","_useGlobalIcon","useGlobalIcon","CloseCircleFilledIcon","XCircle","valueDisplay","label","inputProps","tips","status","suffixIcon","suffix","prefixIcon","maxRows","onClick","onPaste","onFocus","onBlur","_useControlled","useControlled","onInputChange","_useControlled2","tInputValue","setTInputValue","_useHover","_useDragSorter","useDragSorter","_objectSpread","sortOnDraggable","onDragOverCheck","x","targetClassNameRegExp","RegExp","concat","getDragProps","isCompositionRef","_useTagScroll","_useTagList","useTagList","tagValue","onClose","onInnerEnter","onInputBackspaceKeyUp","clearAll","renderLabel","onInputBackspaceKeyDown","NAME_CLASS","WITH_SUFFIX_ICON_CLASS","CLEAR_CLASS","BREAK_LINE_CLASS","tagInputPlaceholder","length","showClearIcon","Boolean","useImperativeHandle","onInputCompositionstart","value","_inputProps$onComposi","onCompositionstart","call","onInputCompositionend","_inputProps$onComposi2","onCompositionend","onInputEnter","trigger","onInnerClick","_tagInputRef$current$","inputElement","focus","onClearClick","_props$onClear","onClear","suffixIconNode","React","createElement","className","displayNode","index","isEmpty","Array","isArray","classes","_defineProperty","maxRowsStyle","TInput","_extends","onChange","val","classnames","style","showInput","keepWrapperWidth","onEnter","onKeydown","onKeyup","inputValue","displayName"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA,IAAIA,eAAqD,GAAG,IAAI;AAEjD,SAASC,YAAYA,CAACC,KAAsB,EAAE;AAC3D,EAAA,IAAMC,WAAW,GAAGC,MAAM,CAAqC,IAAI,CAAC;AACpE,EAAA,IAAAC,qBAAA,GAAiEH,KAAK,CAA9DI,qBAAqB;AAArBA,IAAAA,qBAAqB,GAAAD,qBAAA,KAAA,KAAA,CAAA,GAAG,QAAQ,GAAAA,qBAAA;IAAEE,QAAQ,GAAeL,KAAK,CAA5BK,QAAQ;IAAEC,QAAQ,GAAKN,KAAK,CAAlBM,QAAQ;AAC5D;AACA,EAAA,IAAAC,SAAA,GAA4CC,QAAQ,CAAC,CAAC,CAAC;IAAAC,UAAA,GAAAC,cAAA,CAAAH,SAAA,EAAA,CAAA,CAAA;AAAhDI,IAAAA,cAAc,GAAAF,UAAA,CAAA,CAAA,CAAA;AAAEG,IAAAA,iBAAiB,GAAAH,UAAA,CAAA,CAAA,CAAA;AACxC,EAAA,IAAAI,UAAA,GAA0CL,QAAQ,EAAkB;IAAAM,UAAA,GAAAJ,cAAA,CAAAG,UAAA,EAAA,CAAA,CAAA;AAA7DE,IAAAA,aAAa,GAAAD,UAAA,CAAA,CAAA,CAAA;AAAEE,IAAAA,gBAAgB,GAAAF,UAAA,CAAA,CAAA,CAAA;AAEtC,EAAA,IAAMG,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAIC,OAAuB,EAAK;AACvD,IAAA,IAAMH,aAAa,GAAGG,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAmB;IAC3DH,gBAAgB,CAACD,aAAa,CAAC;EACjC,CAAC;AAED,EAAA,IAAMK,oBAAoB,GAAG,SAAvBA,oBAAoBA,GAAS;IACjC,IAAI,CAACL,aAAa,EAAE;IACpBH,iBAAiB,CAACG,aAAa,CAACM,WAAW,GAAGN,aAAa,CAACO,WAAW,CAAC;EAC1E,CAAC;AAED,EAAA,IAAMC,QAAQ,GAAG,SAAXA,QAAQA,CAAIC,QAAgB,EAAK;IACrC,IAAIC,UAAU,CAACV,aAAa,KAAA,IAAA,IAAbA,aAAa,uBAAbA,aAAa,CAAEW,MAAM,CAAC,EAAE;MACrCX,aAAa,CAACW,MAAM,CAAC;AAAEC,QAAAA,IAAI,EAAEH,QAAQ;AAAEI,QAAAA,QAAQ,EAAE;AAAS,OAAC,CAAC;AAC9D,IAAA;EACF,CAAC;AAED,EAAA,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,GAAS;AAC1BT,IAAAA,oBAAoB,EAAE;IACtBG,QAAQ,CAACZ,cAAc,CAAC;EAC1B,CAAC;AAED,EAAA,IAAMmB,YAAY,GAAG,SAAfA,YAAYA,GAAS;IACzBP,QAAQ,CAAC,CAAC,CAAC;EACb,CAAC;;AAED;AACA,EAAA,IAAMQ,OAAO,GAAG,SAAVA,OAAOA,CAAAC,IAAA,EAAiD;AAAA,IAAA,IAA3CC,CAAC,GAAAD,IAAA,CAADC,CAAC;IAClB,IAAI5B,QAAQ,IAAIC,QAAQ,EAAE;IAC1B,IAAI,CAACS,aAAa,EAAE;AACpB,IAAA,IAAIkB,CAAC,CAACC,MAAM,GAAG,CAAC,EAAE;AAChB,MAAA,IAAMV,QAAQ,GAAGW,IAAI,CAACC,GAAG,CAACrB,aAAa,CAACsB,UAAU,GAAG,GAAG,EAAE1B,cAAc,CAAC;MACzEY,QAAQ,CAACC,QAAQ,CAAC;AACpB,IAAA,CAAC,MAAM;AACL,MAAA,IAAMA,SAAQ,GAAGW,IAAI,CAACG,GAAG,CAACvB,aAAa,CAACsB,UAAU,GAAG,GAAG,EAAE,CAAC,CAAC;MAC5Dd,QAAQ,CAACC,SAAQ,CAAC;AACpB,IAAA;EACF,CAAC;;AAED;AACA,EAAA,IAAMe,oBAAoB,GAAG,SAAvBA,oBAAoBA,GAAS;IACjC,IAAInC,qBAAqB,KAAK,QAAQ,EAAE;AACxC;IACAN,eAAe,GAAG0C,UAAU,CAAC,YAAM;AACjCX,MAAAA,aAAa,EAAE;AACf,MAAA,IAAI/B,eAAe,EAAE2C,YAAY,CAAC3C,eAAe,CAAC;IACpD,CAAC,EAAE,GAAG,CAAC;EACT,CAAC;AAED,EAAA,IAAM4C,mBAAmB,GAAG,SAAtBA,mBAAmBA,GAAS;IAChC,IAAItC,qBAAqB,KAAK,QAAQ,EAAE;IACxCmB,QAAQ,CAAC,CAAC,CAAC;AACX,IAAA,IAAIzB,eAAe,EAAE;MACnB2C,YAAY,CAAC3C,eAAe,CAAC;AAC/B,IAAA;EACF,CAAC;AAED,EAAA,IAAM6C,WAAW,GAAG,SAAdA,WAAWA,GAAS;AACxB,IAAA,IAAI7C,eAAe,EAAE2C,YAAY,CAAC3C,eAAe,CAAC;EACpD,CAAC;AAED,EAAA,IAAM8C,UAAU,GAAG,SAAbA,UAAUA,CAAI1B,OAAuB,EAAK;IAC9C,IAAI,CAACA,OAAO,EAAE;IACdD,mBAAmB,CAACC,OAAO,CAAC;EAC9B,CAAC;AAED2B,EAAAA,SAAS,CAAC,YAAM;AAAA,IAAA,IAAAC,oBAAA;IACd,IAAI7C,WAAW,CAAC8C,OAAO,EAAEH,UAAU,CAAC3C,WAAW,aAAXA,WAAW,KAAA,KAAA,CAAA,IAAA,CAAA6C,oBAAA,GAAX7C,WAAW,CAAE8C,OAAO,MAAA,IAAA,IAAAD,oBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAApBA,oBAAA,CAAsBE,cAAc,CAAC;AACzE,IAAA,OAAOL,WAAW;AAClB;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;AACLC,IAAAA,UAAU,EAAVA,UAAU;AACVD,IAAAA,WAAW,EAAXA,WAAW;AACX1C,IAAAA,WAAW,EAAXA,WAAW;AACXc,IAAAA,aAAa,EAAbA,aAAa;AACbJ,IAAAA,cAAc,EAAdA,cAAc;AACdY,IAAAA,QAAQ,EAARA,QAAQ;AACRM,IAAAA,aAAa,EAAbA,aAAa;AACbC,IAAAA,YAAY,EAAZA,YAAY;AACZb,IAAAA,mBAAmB,EAAnBA,mBAAmB;AACnBG,IAAAA,oBAAoB,EAApBA,oBAAoB;AACpBW,IAAAA,OAAO,EAAPA,OAAO;AACPQ,IAAAA,oBAAoB,EAApBA,oBAAoB;AACpBG,IAAAA,mBAAmB,EAAnBA;GACD;AACH;;AC9Fe,SAASO,QAAQA,CAACjD,KAAsB,EAAE;AACvD,EAAA,IAAQK,QAAQ,GAA2CL,KAAK,CAAxDK,QAAQ;IAAEC,QAAQ,GAAiCN,KAAK,CAA9CM,QAAQ;IAAE4C,YAAY,GAAmBlD,KAAK,CAApCkD,YAAY;IAAEC,YAAY,GAAKnD,KAAK,CAAtBmD,YAAY;AACtD,EAAA,IAAA5C,SAAA,GAA8BC,QAAQ,CAAU,KAAK,CAAC;IAAAC,UAAA,GAAAC,cAAA,CAAAH,SAAA,EAAA,CAAA,CAAA;AAA/C6C,IAAAA,OAAO,GAAA3C,UAAA,CAAA,CAAA,CAAA;AAAE4C,IAAAA,UAAU,GAAA5C,UAAA,CAAA,CAAA,CAAA;AAE1B,EAAA,IAAM6C,QAAQ,GAAG,SAAXA,QAAQA,CAAIC,OAAsD,EAAK;IAC3E,IAAIlD,QAAQ,IAAIC,QAAQ,EAAE;IAC1B+C,UAAU,CAAC,IAAI,CAAC;AAChBH,IAAAA,YAAY,aAAZA,YAAY,KAAA,KAAA,CAAA,IAAZA,YAAY,CAAGK,OAAO,CAAC;EACzB,CAAC;AAED,EAAA,IAAMC,WAAW,GAAG,SAAdA,WAAWA,CACfD,OAAsD,EACnD;IACH,IAAIlD,QAAQ,IAAIC,QAAQ,EAAE;IAC1B+C,UAAU,CAAC,KAAK,CAAC;AACjBF,IAAAA,YAAY,aAAZA,YAAY,KAAA,KAAA,CAAA,IAAZA,YAAY,CAAGI,OAAO,CAAC;EACzB,CAAC;EAED,OAAO;AAAEH,IAAAA,OAAO,EAAPA,OAAO;AAAEE,IAAAA,QAAQ,EAARA,QAAQ;AAAEE,IAAAA,WAAW,EAAXA;GAAa;AAC3C;;AC3BO,IAAMC,oBAAqC,GAAG;AACnDC,EAAAA,SAAS,EAAE,KAAK;AAChBC,EAAAA,UAAU,EAAE,KAAK;AACjBC,EAAAA,SAAS,EAAE,KAAK;AAChBC,EAAAA,QAAQ,EAAE,KAAK;AACfzD,EAAAA,qBAAqB,EAAE,YAAY;AACnC0D,EAAAA,iBAAiB,EAAE,EAAE;AACrBC,EAAAA,eAAe,EAAE,CAAC;AAClBC,EAAAA,WAAW,EAAEC,SAAS;AACtB5D,EAAAA,QAAQ,EAAE,KAAK;AACf6D,EAAAA,IAAI,EAAE,QAAQ;AACdC,EAAAA,YAAY,EAAE;AAChB,CAAC;;;;ACcD,IAAMC,QAAQ,gBAAGC,UAAU,CAA0B,UAACC,aAAa,EAAEC,GAAG,EAAK;AAC3E,EAAA,IAAMvE,KAAK,GAAGwE,eAAe,CAC3BF,aAAa,EACbb,oBACF,CAAC;AACD,EAAA,IAAAgB,UAAA,GAAgCC,SAAS,EAAE;IAAtBC,MAAM,GAAAF,UAAA,CAAnBG,WAAW;EAEnB,IAAAC,cAAA,GAAkCC,aAAa,CAAC;AAC9CC,MAAAA,qBAAqB,EAAEC;AACzB,KAAC,CAAC;IAFMD,qBAAqB,GAAAF,cAAA,CAArBE,qBAAqB;AAI7B,EAAA,IACE3E,qBAAqB,GAqBnBJ,KAAK,CArBPI,qBAAqB;IACrBsD,SAAS,GAoBP1D,KAAK,CApBP0D,SAAS;IACTC,UAAU,GAmBR3D,KAAK,CAnBP2D,UAAU;IACVtD,QAAQ,GAkBNL,KAAK,CAlBPK,QAAQ;IACRC,QAAQ,GAiBNN,KAAK,CAjBPM,QAAQ;IACRsD,SAAS,GAgBP5D,KAAK,CAhBP4D,SAAS;IACTI,WAAW,GAeThE,KAAK,CAfPgE,WAAW;IACXiB,YAAY,GAcVjF,KAAK,CAdPiF,YAAY;IACZC,KAAK,GAaHlF,KAAK,CAbPkF,KAAK;IACLC,UAAU,GAYRnF,KAAK,CAZPmF,UAAU;IACVjB,IAAI,GAWFlE,KAAK,CAXPkE,IAAI;IACJkB,IAAI,GAUFpF,KAAK,CAVPoF,IAAI;IACJC,MAAM,GASJrF,KAAK,CATPqF,MAAM;IACNC,UAAU,GAQRtF,KAAK,CARPsF,UAAU;IACVC,MAAM,GAOJvF,KAAK,CAPPuF,MAAM;IACNC,UAAU,GAMRxF,KAAK,CANPwF,UAAU;IACVC,OAAO,GAKLzF,KAAK,CALPyF,OAAO;IACPC,OAAO,GAIL1F,KAAK,CAJP0F,OAAO;IACPC,OAAO,GAGL3F,KAAK,CAHP2F,OAAO;IACPC,QAAO,GAEL5F,KAAK,CAFP4F,OAAO;IACPC,OAAM,GACJ7F,KAAK,CADP6F,MAAM;EAGR,IAAAC,cAAA,GAAsCC,aAAa,CACjD/F,KAAK,EACL,YAAY,EACZA,KAAK,CAACgG,aACR,CAAC;IAAAC,eAAA,GAAAvF,cAAA,CAAAoF,cAAA,EAAA,CAAA,CAAA;AAJMI,IAAAA,WAAW,GAAAD,eAAA,CAAA,CAAA,CAAA;AAAEE,IAAAA,cAAc,GAAAF,eAAA,CAAA,CAAA,CAAA;AAMlC,EAAA,IAAAG,SAAA,GAA2CnD,QAAQ,CAACjD,KAAK,CAAC;IAAlDoD,OAAO,GAAAgD,SAAA,CAAPhD,OAAO;IAAEE,QAAQ,GAAA8C,SAAA,CAAR9C,QAAQ;IAAEE,WAAW,GAAA4C,SAAA,CAAX5C,WAAW;EACtC,IAAA6C,cAAA,GAAyBC,aAAa,CAAAC,aAAA,CAAAA,aAAA,KACjCvG,KAAK,CAAA,EAAA,EAAA,EAAA;MACRwG,eAAe,EAAExG,KAAK,CAAC6D,QAAQ;AAC/B4C,MAAAA,eAAe,EAAE;AACfC,QAAAA,CAAC,EAAE,IAAI;AACPC,QAAAA,qBAAqB,EAAE,IAAIC,MAAM,KAAAC,MAAA,CAAKlC,MAAM,EAAA,MAAA,CAAM;AACpD;AAAC,KAAA,CACF,CAAC;IAPMmC,YAAY,GAAAT,cAAA,CAAZS,YAAY;AAQpB,EAAA,IAAMC,gBAAgB,GAAG7G,MAAM,CAAC,KAAK,CAAC;AAEtC,EAAA,IAAA8G,aAAA,GAMIjH,YAAY,CAACC,KAAK,CAAC;IALrB6B,aAAa,GAAAmF,aAAA,CAAbnF,aAAa;IACbE,OAAO,GAAAiF,aAAA,CAAPjF,OAAO;IACPQ,oBAAoB,GAAAyE,aAAA,CAApBzE,oBAAoB;IACpBG,mBAAmB,GAAAsE,aAAA,CAAnBtE,mBAAmB;IACnBzC,WAAW,GAAA+G,aAAA,CAAX/G,WAAW;AAEb;EACA,IAAAgH,WAAA,GAQIC,UAAU,CAAAX,aAAA,CAAAA,aAAA,KACTvG,KAAK,CAAA,EAAA,EAAA,EAAA;AACR8G,MAAAA,YAAY,EAAZA;AAAY,KAAA,CACb,CAAC;IAVAK,QAAQ,GAAAF,WAAA,CAARE,QAAQ;IACRC,QAAO,GAAAH,WAAA,CAAPG,OAAO;IACPC,YAAY,GAAAJ,WAAA,CAAZI,YAAY;IACZC,qBAAqB,GAAAL,WAAA,CAArBK,qBAAqB;IACrBC,QAAQ,GAAAN,WAAA,CAARM,QAAQ;IACRC,WAAW,GAAAP,WAAA,CAAXO,WAAW;IACXC,uBAAuB,GAAAR,WAAA,CAAvBQ,uBAAuB;AAKzB,EAAA,IAAMC,UAAU,GAAA,EAAA,CAAAb,MAAA,CAAMlC,MAAM,EAAA,YAAA,CAAY;AACxC,EAAA,IAAMgD,sBAAsB,GAAA,EAAA,CAAAd,MAAA,CAAMlC,MAAM,EAAA,8BAAA,CAA8B;AACtE,EAAA,IAAMiD,WAAW,GAAA,EAAA,CAAAf,MAAA,CAAMlC,MAAM,EAAA,0BAAA,CAA0B;AACvD,EAAA,IAAMkD,gBAAgB,GAAA,EAAA,CAAAhB,MAAA,CAAMlC,MAAM,EAAA,wBAAA,CAAwB;AAE1D,EAAA,IAAMmD,mBAAmB,GAAG,EAACX,QAAQ,KAAA,IAAA,IAARA,QAAQ,KAAA,KAAA,CAAA,IAARA,QAAQ,CAAEY,MAAM,CAAA,GAAG/D,WAAW,GAAG,EAAE;EAEhE,IAAMgE,aAAa,GAAGC,OAAO,CAC3B,CAAC5H,QAAQ,IAAI,CAACC,QAAQ,IAAIsD,SAAS,IAAIR,OAAO,KAAI+D,QAAQ,KAAA,IAAA,IAARA,QAAQ,uBAARA,QAAQ,CAAEY,MAAM,CACpE,CAAC;EAEDG,mBAAmB,CAAC3D,GAAG,EAAc,YAAA;AAAA,IAAA,OAAAgC,aAAA,CAAA,EAAA,EAC/BtG,WAAW,CAAC8C,OAAO,IAAI,EAAE,CAAA;AAAA,EAAA,CAC7B,CAAC;EAEH,IAAMoF,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAC3BC,KAAiB,EACjB7E,OAAkD,EAC/C;AAAA,IAAA,IAAA8E,qBAAA;IACHtB,gBAAgB,CAAChE,OAAO,GAAG,IAAI;IAC/BoC,UAAU,KAAA,IAAA,IAAVA,UAAU,KAAA,KAAA,CAAA,IAAA,CAAAkD,qBAAA,GAAVlD,UAAU,CAAEmD,kBAAkB,MAAA,IAAA,IAAAD,qBAAA,eAA9BA,qBAAA,CAAAE,IAAA,CAAApD,UAAU,EAAuBiD,KAAK,EAAE7E,OAAO,CAAC;EAClD,CAAC;EAED,IAAMiF,qBAAqB,GAAG,SAAxBA,qBAAqBA,CACzBJ,KAAiB,EACjB7E,OAAkD,EAC/C;AAAA,IAAA,IAAAkF,sBAAA;IACH1B,gBAAgB,CAAChE,OAAO,GAAG,KAAK;IAChCoC,UAAU,KAAA,IAAA,IAAVA,UAAU,KAAA,KAAA,CAAA,IAAA,CAAAsD,sBAAA,GAAVtD,UAAU,CAAEuD,gBAAgB,MAAA,IAAA,IAAAD,sBAAA,eAA5BA,sBAAA,CAAAF,IAAA,CAAApD,UAAU,EAAqBiD,KAAK,EAAE7E,OAAO,CAAC;EAChD,CAAC;EAED,IAAMoF,YAAY,GAAG,SAAfA,YAAYA,CAChBP,KAAiB,EACjB7E,OAA+C,EAC5C;IACH4C,cAAc,CAAC,EAAE,EAAE;MAAElE,CAAC,EAAEsB,OAAO,CAACtB,CAAC;AAAE2G,MAAAA,OAAO,EAAE;AAAQ,KAAC,CAAC;IACtD,CAAC7B,gBAAgB,CAAChE,OAAO,IAAIsE,YAAY,CAACe,KAAK,EAAE7E,OAAO,CAAC;AACzD1B,IAAAA,aAAa,EAAE;EACjB,CAAC;AAED,EAAA,IAAMgH,YAAY,GAAG,SAAfA,YAAYA,CAAItF,OAA0C,EAAK;IACnE,IAAI,CAACvD,KAAK,CAACM,QAAQ,IAAI,CAACN,KAAK,CAACK,QAAQ,EAAE;MAAA,IAAAyC,oBAAA,EAAAgG,qBAAA;AACtC,MAAA,CAAAhG,oBAAA,GAAC7C,WAAW,CAAC8C,OAAO,MAAA,IAAA,IAAAD,oBAAA,KAAA,KAAA,CAAA,IAAA,CAAAA,oBAAA,GAApBA,oBAAA,CAA8BiG,YAAY,MAAA,IAAA,IAAAjG,oBAAA,KAAA,KAAA,CAAA,IAAA,CAAAgG,qBAAA,GAA1ChG,oBAAA,CAA4CkG,KAAK,MAAA,IAAA,IAAAF,qBAAA,KAAA,KAAA,CAAA,IAAjDA,qBAAA,CAAAP,IAAA,CAAAzF,oBAAoD,CAAC;AACvD,IAAA;AACA4C,IAAAA,OAAO,aAAPA,OAAO,KAAA,KAAA,CAAA,IAAPA,OAAO,CAAGnC,OAAO,CAAC;EACpB,CAAC;AAED,EAAA,IAAM0F,YAAY,GAAG,SAAfA,YAAYA,CAAIhH,CAA4B,EAAK;AAAA,IAAA,IAAAiH,cAAA;AACrD3B,IAAAA,QAAQ,CAAC;AAAEtF,MAAAA,CAAC,EAADA;AAAE,KAAC,CAAC;IACfkE,cAAc,CAAC,EAAE,EAAE;AAAElE,MAAAA,CAAC,EAADA,CAAC;AAAE2G,MAAAA,OAAO,EAAE;AAAQ,KAAC,CAAC;AAC3C,IAAA,CAAAM,cAAA,GAAAlJ,KAAK,CAACmJ,OAAO,MAAA,IAAA,IAAAD,cAAA,KAAA,KAAA,CAAA,IAAbA,cAAA,CAAAX,IAAA,CAAAvI,KAAK,EAAW;AAAEiC,MAAAA,CAAC,EAADA;AAAE,KAAC,CAAC;EACxB,CAAC;EAED,IAAMmH,cAAc,GAAGpB,aAAa,gBAClCqB,KAAA,CAAAC,aAAA,CAACvE,qBAAqB,EAAA;AAACwE,IAAAA,SAAS,EAAE3B,WAAY;AAAClC,IAAAA,OAAO,EAAEuD;GAAe,CAAC,GAExE3D,UACD;;AAED;EACA,IAAMkE,WAAW,GAAG/H,UAAU,CAACwD,YAAY,CAAC,GACxCA,YAAY,CAAC;AACbmD,IAAAA,KAAK,EAAEjB,QAAQ;AACfC,IAAAA,OAAO,EAAE,SAATA,OAAOA,CAAGqC,KAAK,EAAA;AAAA,MAAA,OAAKrC,QAAO,CAAC;AAAEqC,QAAAA,KAAK,EAALA;AAAM,OAAC,CAAC;AAAA,IAAA;GACvC,CAAC,GACAxE,YAAY;AAEhB,EAAA,IAAMyE,OAAO,GAAG,EAAEC,KAAK,CAACC,OAAO,CAACzC,QAAQ,CAAC,IAAIA,QAAQ,CAACY,MAAM,CAAC;AAE7D,EAAA,IAAM8B,OAAO,GAAG,CACdnC,UAAU,EAAAoC,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAA,EAAA,EAEPjC,gBAAgB,EAAGzH,qBAAqB,KAAK,YAAY,GACzDuH,sBAAsB,EAAG,CAAC,CAACyB,cAAc,CAAA,EAAA,EAAA,CAAAvC,MAAA,CACtClC,MAAM,EAAA,WAAA,CAAA,EAAc+E,OAAO,CAAA,EAAA,EAAA,CAAA7C,MAAA,CAC3BlC,MAAM,EAAA,sBAAA,CAAA,EAAyB,CAAC+E,OAAO,CAAA,EAAA,EAAA,CAAA7C,MAAA,CACvClC,MAAM,EAAA,sBAAA,CAAA,EACRvE,qBAAqB,KAAK,YAAY,IAAIqF,OAAO,CAAA,EAAA,EAAA,CAAAoB,MAAA,CAC/ClC,MAAM,EAAA,uBAAA,CAAA,EACR3E,KAAK,CAAC6D,QAAQ,IAAI,CAACvD,QAAQ,IAAI,CAACD,QAAQ,CAAA,EAE5CL,KAAK,CAACuJ,SAAS,CAChB;EAED,IAAMQ,YAAY,GAAGtE,OAAO,GACvB;AACD,IAAA,YAAY,EAAEA,OAAO;AACrB,IAAA,kBAAkB,EAAEvB;GACrB,GACC,EAAE;AAEN,EAAA,oBACEmF,KAAA,CAAAC,aAAA,CAACU,KAAM,EAAAC,QAAA,CAAA;AACL1F,IAAAA,GAAG,EAAEtE,WAAmB;AACxBmI,IAAAA,KAAK,EAAElC,WAAY;AACnBgE,IAAAA,QAAQ,EAAE,SAAVA,QAAQA,CAAGC,GAAG,EAAE5G,OAAO,EAAK;AAC1B4C,MAAAA,cAAc,CAACgE,GAAG,EAAA5D,aAAA,CAAAA,aAAA,KAAOhD,OAAO,CAAA,EAAA,EAAA,EAAA;AAAEqF,QAAAA,OAAO,EAAE;AAAO,OAAA,CAAE,CAAC;IACvD,CAAE;IACFlF,SAAS,EAAE,IAAK;AAAC;AACjB3B,IAAAA,OAAO,EAAEA,OAAQ;AACjBmC,IAAAA,IAAI,EAAEA,IAAK;AACXP,IAAAA,UAAU,EAAEA,UAAW;AACvBtD,IAAAA,QAAQ,EAAEA,QAAS;AACnBC,IAAAA,QAAQ,EAAEA,QAAS;IACnB4E,KAAK,EAAEsC,WAAW,CAAC;AAAEgC,MAAAA,WAAW,EAAXA,WAAW;AAAEtE,MAAAA,KAAK,EAALA;AAAM,KAAC,CAAE;AAC3CqE,IAAAA,SAAS,EAAEa,UAAU,CAACP,OAAO,CAAE;IAC/BQ,KAAK,EAAA9D,aAAA,CAAAA,aAAA,CAAA,EAAA,EACAvG,KAAK,CAACqK,KAAK,CAAA,EACXN,YAAY,CACf;AACF3E,IAAAA,IAAI,EAAEA,IAAK;AACXC,IAAAA,MAAM,EAAEA,MAAO;AACfrB,IAAAA,WAAW,EAAE8D,mBAAoB;AACjCvC,IAAAA,MAAM,EAAEA,MAAO;AACfC,IAAAA,UAAU,EAAEA,UAAW;AACvBF,IAAAA,UAAU,EAAE8D,cAAe;IAC3BkB,SAAS,EAAE,EAACnF,UAAU,KAAA,IAAA,IAAVA,UAAU,KAAA,KAAA,CAAA,IAAVA,UAAU,CAAE9E,QAAQ,CAAA,IAAI,CAAC8G,QAAQ,IAAI,EAACA,QAAQ,KAAA,IAAA,IAARA,QAAQ,KAAA,KAAA,CAAA,IAARA,QAAQ,CAAEY,MAAM,CAAC;IACnEwC,gBAAgB,EAAE,CAAC7G,SAAU;AAC7BiC,IAAAA,OAAO,EAAEA,OAAQ;AACjBD,IAAAA,OAAO,EAAEmD,YAAa;AACtB2B,IAAAA,OAAO,EAAE7B,YAAa;AACtB8B,IAAAA,SAAS,EAAEhD,uBAAwB;AACnCiD,IAAAA,OAAO,EAAEpD,qBAAsB;AAC/BpE,IAAAA,YAAY,EAAE,SAAdA,YAAYA,CAAGK,OAAO,EAAK;MACzBD,QAAQ,CAACC,OAAO,CAAC;AACjBhB,MAAAA,oBAAoB,EAAE;IACxB,CAAE;AACFY,IAAAA,YAAY,EAAE,SAAdA,YAAYA,CAAGI,OAAO,EAAK;MACzBC,WAAW,CAACD,OAAO,CAAC;AACpBb,MAAAA,mBAAmB,EAAE;IACvB,CAAE;AACFkD,IAAAA,OAAO,EAAE,SAATA,OAAOA,CAAG+E,UAAU,EAAEpH,OAAO,EAAK;AAChCqC,MAAAA,QAAO,aAAPA,QAAO,KAAA,KAAA,CAAA,IAAPA,QAAO,CAAGuB,QAAQ,EAAE;QAAElF,CAAC,EAAEsB,OAAO,CAACtB,CAAC;AAAE0I,QAAAA,UAAU,EAAVA;AAAW,OAAC,CAAC;IACnD,CAAE;AACF9E,IAAAA,MAAM,EAAE,SAARA,MAAMA,CAAG8E,UAAU,EAAEpH,OAAO,EAAK;AAC/B,MAAA,IAAI2C,WAAW,EAAE;QACfC,cAAc,CAAC,EAAE,EAAE;UAAElE,CAAC,EAAEsB,OAAO,CAACtB,CAAC;AAAE2G,UAAAA,OAAO,EAAE;AAAO,SAAC,CAAC;AACvD,MAAA;AACA/C,MAAAA,OAAM,aAANA,OAAM,KAAA,KAAA,CAAA,IAANA,OAAM,CAAGsB,QAAQ,EAAE;QAAElF,CAAC,EAAEsB,OAAO,CAACtB,CAAC;AAAE0I,QAAAA,UAAU,EAAE;AAAG,OAAC,CAAC;IACtD,CAAE;AACFrC,IAAAA,kBAAkB,EAAEH,uBAAwB;AAC5CO,IAAAA,gBAAgB,EAAEF;GAAsB,EACpCrD,UAAU,CACf,CAAC;AAEN,CAAC;AAEDf,QAAQ,CAACwG,WAAW,GAAG,UAAU;;;;"}