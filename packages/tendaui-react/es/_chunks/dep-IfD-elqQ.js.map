{"version":3,"file":"dep-IfD-elqQ.js","sources":["../../../components/hooks/useControlled.ts"],"sourcesContent":["import { upperFirst } from 'lodash-es';\r\nimport React from 'react';\r\ntype DefaultOptions<T extends string> = `default${Capitalize<T>}`;\r\nexport interface ChangeHander<T, P extends any[]> {\r\n  (value: T, ...args: P): void;\r\n}\r\ntype ToString<T extends string | number | symbol> = T extends string\r\n  ? T\r\n  : `${Extract<T, number>}`;\r\nconst useControlled: <P extends any[], R extends object, K extends keyof R>(\r\n  props: R,\r\n  valueKey: K,\r\n  onChange: ChangeHander<R[K], P>,\r\n  defaultOptions?: { [key in DefaultOptions<ToString<K>>]: R[K] },\r\n) => [R[K], ChangeHander<R[K], P>] = (\r\n  props = {} as any,\r\n  valueKey, // 默认受控属性为 value\r\n  onChange,\r\n  defaultOptions = {} as any,\r\n) => {\r\n  const isControlled = Reflect.has(props, valueKey);\r\n  // 受控属性\r\n  const value = props[valueKey];\r\n\r\n  // 默认值\r\n  const defaultKey = `default${upperFirst(valueKey as string)}`;\r\n  const defaultValue =\r\n    defaultOptions[defaultKey as keyof typeof defaultOptions] ||\r\n    (props as Record<string, any>)[defaultKey];\r\n\r\n  const [internalValue, setInternalValue] = React.useState(defaultValue);\r\n\r\n  if (isControlled) return [value, onChange || (() => {})];\r\n  return [\r\n    internalValue,\r\n    (newValue, ...args) => {\r\n      setInternalValue(newValue);\r\n      onChange?.(newValue, ...args);\r\n    },\r\n  ];\r\n};\r\n\r\nexport default useControlled;\r\n"],"names":["useControlled","props","arguments","length","undefined","valueKey","onChange","defaultOptions","isControlled","Reflect","has","value","defaultKey","concat","upperFirst","defaultValue","_React$useState","React","useState","_React$useState2","_slicedToArray","internalValue","setInternalValue","newValue","_len","args","Array","_key","apply"],"mappings":";;;;AASA,IAAMA,aAK4B,GAAG,SAL/BA,aAK4BA,GAK7B;AAAA,EAAA,IAJHC,KAAK,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE;EAAA,IACVG,QAAQ,GAAAH,SAAA,CAAAC,MAAA,GAAA,CAAA,GAAAD,SAAA,MAAAE,SAAA;AAAA,EAAA;AAAE;AACVE,EAAAA,QAAQ,GAAAJ,SAAA,CAAAC,MAAA,GAAA,CAAA,GAAAD,SAAA,MAAAE,SAAA;AAAA,EAAA,IACRG,cAAc,GAAAL,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE;EAEnB,IAAMM,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACT,KAAK,EAAEI,QAAQ,CAAC;AACjD;AACA,EAAA,IAAMM,KAAK,GAAGV,KAAK,CAACI,QAAQ,CAAC;;AAE7B;EACA,IAAMO,UAAU,aAAAC,MAAA,CAAaC,UAAU,CAACT,QAAkB,CAAC,CAAE;EAC7D,IAAMU,YAAY,GAChBR,cAAc,CAACK,UAAU,CAAgC,IACxDX,KAAK,CAAyBW,UAAU,CAAC;AAE5C,EAAA,IAAAI,eAAA,GAA0CC,KAAK,CAACC,QAAQ,CAACH,YAAY,CAAC;IAAAI,gBAAA,GAAAC,cAAA,CAAAJ,eAAA,EAAA,CAAA,CAAA;AAA/DK,IAAAA,aAAa,GAAAF,gBAAA,CAAA,CAAA,CAAA;AAAEG,IAAAA,gBAAgB,GAAAH,gBAAA,CAAA,CAAA,CAAA;EAEtC,IAAIX,YAAY,EAAE,OAAO,CAACG,KAAK,EAAEL,QAAQ,IAAK,YAAM,CAAC,CAAE,CAAC;AACxD,EAAA,OAAO,CACLe,aAAa,EACb,UAACE,QAAQ,EAAc;IACrBD,gBAAgB,CAACC,QAAQ,CAAC;IAAC,KAAA,IAAAC,IAAA,GAAAtB,SAAA,CAAAC,MAAA,EADfsB,IAAI,OAAAC,KAAA,CAAAF,IAAA,GAAA,CAAA,GAAAA,IAAA,WAAAG,IAAA,GAAA,CAAA,EAAAA,IAAA,GAAAH,IAAA,EAAAG,IAAA,EAAA,EAAA;AAAJF,MAAAA,IAAI,CAAAE,IAAA,GAAA,CAAA,CAAA,GAAAzB,SAAA,CAAAyB,IAAA,CAAA;AAAA,IAAA;AAEhBrB,IAAAA,QAAQ,KAAA,IAAA,IAARA,QAAQ,KAAA,KAAA,CAAA,IAARA,QAAQ,CAAAsB,KAAA,CAAA,KAAA,CAAA,EAAA,CAAGL,QAAQ,CAAA,CAAAV,MAAA,CAAKY,IAAI,CAAA,CAAC;AAC/B,EAAA,CAAC,CACF;AACH;;;;"}